"use strict";function __$styleInject(t,e){if("undefined"==typeof document)return e;t=t||"";var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");return n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),r.appendChild(n),e}function functor(t){return"function"==typeof t?t:function(){return t}}function textWrap(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t.label},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"start";e=functor(e),t.each(function(t,a){var o=d3.select(this),i=(""+e.call(this,t,a)).split(/\s+/).reverse(),l=void 0,d=[],c=[i.pop()],u=1.1,s=+o.attr("x"),p=+o.attr("y"),b=parseFloat(o.attr("dy"))||0;for((o.html()||"").indexOf("tspan")===-1&&o.text(""),l=i.pop();l;)c.join(" ").length+l.length>r&&(d.push(c),c=[]),c.push(l),l=i.pop();d.push(c);var h=o.selectAll("tspan").data(d),f=(d.length-1)*u,g="end"===n?f:"middle"===n?f/2:0;h.merge(h.enter().append("tspan")).text(function(t){return t.join(" ")}).attr("x",s).attr("y",p).attr("dy",function(t,e){return b+e*u-g+"em"})})}function textWrapPX(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;t.each(function(){var t=d3.select(this),r=t.text().split(/\s+/).reverse(),n=void 0,a=[],o=0,i=1.1,l=parseFloat(t.attr("y"))||0,d=parseFloat(t.attr("dy"))||0,c=t.text(null).append("tspan").attr("x",0).attr("y",l).attr("dy",d+"em");for(n=r.pop();n;)a.push(n),c.text(a.join(" ")),c.node().getComputedTextLength()>e&&(a.pop(),c.text(a.join(" ")),a=[n],c=t.append("tspan").attr("x",0).attr("y",l).attr("dy",++o*i+d+"em").text(n)),n=r.pop()})}function omit(t,e){var r={};for(var n in t)"function"!=typeof t[n]&&e.indexOf(n)<0&&(r[n]=t[n]);return r}function tweenArc(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{omit:["data"]};return t.selection?void t.attrTween("d",function(t){var n=this;t=omit(t,r.omit),this.current=this.current||t;var a=d3.interpolate(this.current,t);return function(t){return n.current=a(t),e(n.current)}}):t.attr("d",function(t){return this.current=omit(t,r.omit),e(t)})}function numberize(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return isNaN(t)||null===t?e:t}function tweenNumber(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t};return e=functor(e),t.selection?void t.tween("text",function(t,n){var a=this,o=numberize(e.call(this,t,n));this.current=numberize(this.current,o);var i=d3.interpolate(this.current,o);return function(t){a.textContent=r(a.current=i(t))}}):t.text(function(t,n){return this.current=numberize(e.call(this,t,n)),r(this.current)})}function tweenCentroid(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{omit:["data"]};return t.selection?void t.attrTween("transform",function(t){var n=this;t=omit(t,r.omit),this.current=this.current||t;var a=d3.interpolate(this.current,t);return function(t){return n.current=a(t),"translate("+e.centroid(n.current)+") "+("rotate("+(n.current.rotate||0)+")")}}):t.attr("transform",function(t){return this.current=omit(t,r.omit),"translate("+e.centroid(this.current)+")"+("rotate("+(this.current.rotate||0)+")")})}function base(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],a=function(e,n){return function(a){if(!arguments.length)return r[e];var o=r[e];return r[e]=a,n&&n(a,o),t}},o=function(t){return function(){return r[t]}},i=function(e,n){return function(a){if(!arguments.length)return r[e];var o=r[e];return r[e]=functor(a),n&&n(r[e],o),t}},l=function(e,n){return function(a){if(!arguments.length)return r[e];var o=r[e];return a&&a.domain?r[e]=function(){return a}:r[e]=functor(a),n&&n(r[e],o),t}},d={base:function(){return t},values:function(){return r},removeProp:function(e){return n.indexOf(e)!==-1?d:(r[e]=null,t[e]=null,d)},addProp:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a(e),i=arguments[3];return r[e]||t[e]?d:(o=o||a(e,i),o(n),t[e]=o,d)},addPropGet:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o(e);return r[e]||t[e]?d:(r[e]=n,t[e]=a,d)},addMethod:function(e,r){return t[e]?d:(t[e]=r,d)},addPropFunctor:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i(e),o=arguments[3];return r[e]||t[e]?d:(a=a||i(e,o),a(n),t[e]=a,d)},addScaleFunctor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l(t),n=arguments[3];return d.addProp(t,e,r,n)},addDispatcher:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"on",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dispatch";return t[a]?d:r[o]?d:(t[a]=function(e,n){return 0===arguments.length?r[o]:1===arguments.length?r[o].on(e):(r[o].on(e,n),t)},r[o]=d3.dispatch.apply(e,n),d)}};return d}function tooltip(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d2bid(),e={},r=function t(e){return(e.selection?e.selection():e).on(l("mouseover"),a).on(l("mouseout"),i).on(l("mousemove"),o),t},n=function(t,r){var n=this.getBoundingClientRect(),a={},o=(e.at.call(this,t,r)||(d3.event.clientX>window.innerWidth/2?"center left":"center right")).split(" ");switch(o={x:o[1],y:o[0]},o.x){case"left":a.x=n.left;break;case"center":a.x=n.left+n.width/2;break;default:a.x=n.left+n.width}switch(o.y){case"bottom":a.y=n.top+n.height;break;case"center":a.y=n.top+n.height/2;break;default:a.y=n.top}return a},a=function(t,r){var n=e.selection.selectAll(".d2b-tooltip").data(function(t){return[t]}),a=n.enter().append("div").style("opacity",0).attr("class","d2b-tooltip");a.append("div").attr("class","d2b-tooltip-content"),n=n.merge(a),n.transition().duration(100).style("opacity",1),e.dispatch.call("insert",n,this,t,r)},o=function(t,r){var a=e.html.call(this,t,r),o=e.target.call(this,t,r),i=e.color.call(this,t,r),l=o?o.node():this,d=e.followMouse.call(this,t,r)?{x:d3.event.clientX,y:d3.event.clientY}:n.call(l,t,r),c=e.selection.selectAll(".d2b-tooltip").data(function(t){return[t]}),u=e.my.call(this,t,r)||(d3.event.clientX>window.innerWidth/2?"left":"right");c.attr("class","d2b-tooltip d2b-tooltip-"+u).style("top",d.y+"px").style("left",d.x+"px").style("border-color",i).select(".d2b-tooltip-content").html(a),e.dispatch.call("move",c,this,t,r)},i=function(t,r){var n=e.selection.selectAll(".d2b-tooltip").data(function(t){return[t]});n.transition().duration(100).style("opacity",0).remove(),e.dispatch.call("remove",n,this,t,r)},l=function(t){return t+".d2b-tooltip"},d=function(n,a){a&&a.select(".d2b-tooltip-area-"+t).remove(),n&&(e.selection=n.selectAll(".d2b-tooltip-area-"+t).data([r]),e.selection=e.selection.merge(e.selection.enter().append("div").attr("class","d2b-tooltip-area-"+t+" d2b-tooltip-area")))};return base(r,e).addProp("container",d3.select("body"),null,d).addMethod("clear",function(t){return(t.selection?t.selection():t).on(l("mouseover"),null).on(l("mouseout"),null).on(l("mousemove"),null),r}).addPropFunctor("followMouse",!1).addPropFunctor("color",null).addPropFunctor("my",null).addPropFunctor("at",null).addPropFunctor("target",null).addPropFunctor("html",null).addDispatcher(["insert","move","remove"]),r}function oreq(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0];return e.forEach(function(t){null!==n&&void 0!==n&&n!==!1||(n=t)}),n}function tooltipAxis(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d2bid(),e={},r={},n=function(t,r,n){if("y"===n){if(r.y===1/0)return t.style("opacity",0);t.style("opacity",1).attr("transform","translate(0, "+r.y+")").attr("y1",0).attr("y2",0).attr("x1",0).attr("x2",e.size.width)}else{if(r.x===1/0)return t.style("opacity",0);t.style("opacity",1).attr("transform","translate("+r.x+", 0)").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",e.size.height)}},a=function(t,r,n){var a=t.node();if(a){var o=t.node().getBoundingClientRect(),i=n.x,l=n.y,d=10;e.trackY?l+=r.y>e.size.height/2?r.y-d-o.height:r.y+d:l=d3.event.clientY-n.y>e.size.height/2?d3.event.clientY-d-o.height:d3.event.clientY+d,e.trackX?i+=r.x>e.size.width/2?r.x-d-o.width:r.x+d:i=d3.event.clientX-n.x>e.size.width/2?d3.event.clientX-d-o.width:d3.event.clientX+d,i+=window.pageXOffset,l+=window.pageYOffset,t.style("left",i+"px").style("top",l+"px")}},o=function(t,r){var n=e.title(r.points.map(function(t){return t.data}));t.select(".d2b-tooltip-title").style("display",n?"block":"none").html(n);var a=t.select(".d2b-tooltip-content"),o=a.selectAll(".d2b-tooltip-row").data(r.points),i=o.enter().append("div").attr("class","d2b-tooltip-row");o.exit().remove(),o=o.merge(i).html(function(t){return t.row}).style("border-left-color",function(t){return t.color||"transparent"})},i=function(t){var r={x:d3.event.clientX-t.x,y:d3.event.clientY-t.y},n=1/0,a=1/0,o=[];for(var i in m)if(m.hasOwnProperty(i)){var l=m[i],d=function(t){if(!l.hasOwnProperty(t))return"continue";var i=l[t],d=[];i.config.data.forEach(function(t,l){var c={data:t,x:oreq(i.config.x(t,l),e.x(t,l)),y:oreq(i.config.y(t,l),e.y(t,l)),color:oreq(i.config.color(t,l),e.color(t,l)),row:oreq(i.config.row(t,l),e.row(t,l))};if(e.trackX&&e.trackY){if(c.x===n&&c.y===a)return d.push(c);var u=Math.sqrt(Math.pow(n-r.x,2)+Math.pow(a-r.y,2)),s=Math.sqrt(Math.pow(c.x-r.x,2)+Math.pow(c.y-r.y,2));s<u&&s<e.threshold&&(n=c.x,a=c.y,o=[],d=[c])}else if(e.trackX){if(c.x===n)return d.push(c);var p=Math.abs(n-r.x),b=Math.abs(c.x-r.x);b<p&&b<e.threshold&&(n=c.x,o=[],d=[c])}else if(e.trackY){if(c.y===a)return d.push(c);var h=Math.abs(a-r.y),f=Math.abs(c.y-r.y);f<h&&f<e.threshold&&(a=c.y,o=[],d=[c])}}),o=o.concat(d)};for(var c in l){d(c)}}return o=o.sort(function(t,e){return d3.ascending(t.x,e.x)||d3.ascending(t.y,e.y)}),{x:n,y:a,points:o}},l=function(t){t.transition().duration(50).style("opacity",0).remove()},d=function(t){t.transition().duration(50).style("opacity",1)},c=function(){var t=e.selectionSvg.selectAll(".d2b-tooltip-marker-x").data(e.trackX?[r]:[]),n=t.enter().append("line").attr("class","d2b-tooltip-marker-x d2b-tooltip-marker"),a=e.selectionSvg.selectAll(".d2b-tooltip-marker-y").data(e.trackY?[r]:[]),o=a.enter().append("line").attr("class","d2b-tooltip-marker-y d2b-tooltip-marker"),i=e.selection.selectAll(".d2b-tooltip").data([r]),l=i.enter().append("div").attr("class","d2b-tooltip");l.merge(i).call(d),a.merge(o).call(d),t.merge(n).call(d),l.append("div").attr("class","d2b-tooltip-title"),l.append("div").attr("class","d2b-tooltip-content")},u=function(){e.selectionSvg.selectAll(".d2b-tooltip-marker-x").data([]).exit().call(l),e.selectionSvg.selectAll(".d2b-tooltip-marker-y").data([]).exit().call(l),e.selection.selectAll(".d2b-tooltip").data([]).exit().call(l)},s=function(t,r){var l=e.selectionSvg.selectAll(".d2b-tooltip-base").data([t]);l=l.merge(l.enter().append("rect").attr("class","d2b-tooltip-base"));var d=l.node().getBoundingClientRect();d={x:d.left,y:d.top};var s=i(d);return s.points.length?(c(),e.selectionSvg.select(".d2b-tooltip-marker-x").call(n,s,"x"),e.selectionSvg.select(".d2b-tooltip-marker-y").call(n,s,"y"),e.selection.select(".d2b-tooltip").call(o,s).call(a,s,d),void e.dispatch.call("move",e.tooltip,this,t,r)):u()},p=function(){u()},b=function(t){return t+".d2b-tooltip-axis"},h=function(n,a){a&&a.select("div.d2b-tooltip-axis-area-"+t).remove(),n&&(e.selection=n.selectAll("div.d2b-tooltip-axis-area-"+t).data([r]),e.selection=e.selection.merge(e.selection.enter().append("div").attr("class","d2b-tooltip-axis-area-"+t+" d2b-tooltip-axis-area")))},f=function(n,a){a&&a.select("g.d2b-tooltip-axis-area-"+t).remove(),n&&(e.selectionSvg=n.selectAll("g.d2b-tooltip-axis-area-"+t).data([r]),e.selectionSvg=e.selectionSvg.merge(e.selectionSvg.enter().append("g").attr("class","d2b-tooltip-axis-area-"+t+" d2b-tooltip-axis-area")))},g=function(t,e){e&&e.on(b("mouseout"),null).on(b("mousemove"),null),t&&t.on(b("mouseout"),p).on(b("mousemove"),s)};base(r,e).addProp("htmlContainer",d3.select("body"),null,h).addProp("svgContainer",null,null,f).addProp("tracker",d3.select("body"),null,g).addProp("size",{height:0,width:0}).addProp("trackX",!0).addProp("trackY",!1).addProp("threshold",1/0).addMethod("clear",function(t,e){return 0===arguments.length?m={}:1===arguments.length?delete m[t]:arguments.length>=2&&delete m[t][e],r}).addPropFunctor("title",null).addPropFunctor("x",function(t){return t.x}).addPropFunctor("y",function(t){return t.y}).addPropFunctor("color",null).addPropFunctor("row",null).addDispatcher(["move"]);var m={};return r.graph=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=m[t]=m[t]||{},n=r[e];if(!n){n=r[e]={interface:{},config:{}};var a=base(n.interface,n.config);a.addProp("data",[]).addMethod("clear",function(){return n.config.data=[],n.interface}).addMethod("addPoint",function(t){return n.config.data.push(t),n.interface}).addPropFunctor("x",null).addPropFunctor("y",null).addPropFunctor("color",null).addPropFunctor("row",null)}return n.interface},r}function stack(){var t={},e=function(e){var r=this,n=e;e=e.map(t.values);var a=[],o=e.map(function(e){var n={};return e.forEach(function(e,o){var i=t.x.call(r,e,o);a.push(i),n[i]=t.y.call(r,e,o)}),n});a=d3.set(a).values();var i=a.reduce(function(t,e,r){return t[e]=r,t},{}),l=d3.range(0,e.length),d=a.map(function(t){return o.map(function(e){return e[t]||0})});t.stack.keys(l).value(function(t,e){return t[e]||0});var c=t.stack(d);return e.forEach(function(e,n){e.forEach(function(e,a){var o=t.x.call(r,e,a),l=c[n][i[o]];t.out.call(r,e,l[0],l[1],o)})}),n};return base(e,t).addProp("stack",d3.stack()).addPropFunctor("values",function(t){return t}).addPropFunctor("x",function(t){return t.x}).addPropFunctor("y",function(t){return t.y}).addPropFunctor("out",function(t,e,r){t.y0=e,t.y1=r}),e}function breadcrumbs(){var t={},e=function(e){var r=e.selection?e.selection():e,n=r.selectAll(".d2b-breadcrumbs").data(function(t){return[t]}),a=n.enter().append("div").attr("class","d2b-breadcrumbs");n=n.merge(a).classed("d2b-vertical",t.vertical);var o=n.selectAll(".d2b-breadcrumb").data(t.values,t.key),i=o.exit(),l=o.enter().append("div").attr("class","d2b-breadcrumb").style("opacity",0);l.append("div").attr("class","d2b-breadcrumb-icon"),l.append("div").attr("class","d2b-breadcrumb-content"),o=o.merge(l).order(),o.select(".d2b-breadcrumb-content").html(t.html),e!==r&&(o=o.transition(e),i=i.transition(e).style("opacity",0)),o.style("border-color",t.color).style("opacity",1).select(".d2b-breadcrumb-icon").style("background-color",t.color),i.remove()};return base(e,t).addPropFunctor("values",function(t){return t}).addPropFunctor("key",function(t,e){return e}).addPropFunctor("color","blue").addPropFunctor("html",function(t){return t.html}).addPropFunctor("vertical",!0),e}function legend(){var t={},e=d3.symbol().size(80),r=function r(n){var a=n.selection?n.selection():n,o=a.selectAll(".d2b-legend").data(function(t){return[t]}),i=o.enter().append("div").attr("class","d2b-legend");o=o.merge(i).classed("d2b-vertical",t.vertical);var l=o.selectAll(".d2b-legend-item").data(t.values,t.key),d=l.exit(),c=l.enter().append("div").attr("class","d2b-legend-item").style("opacity",0);c.append("div").attr("class","d2b-legend-icon"),c.append("div").attr("class","d2b-legend-content"),l=l.merge(c).order(),l.select(".d2b-legend-content").html(t.html),n!==a&&(l=l.transition(n),d=d.transition(n).style("opacity",0)),l.style("opacity",1).each(function(r,n){var a=d3.select(this),o=t.color(r,n),i=t.empty(r,n);a.style("border-color",o);var l=t.icon(r,n),d=a.select(".d2b-legend-icon"),c=[],u=[],s=d.node().getBoundingClientRect(),p={width:s.width,height:s.height},b={x:p.width/2,y:p.height/2};"string"==typeof l?c.push(l):u.push(l);var h=d.selectAll(".d2b-legend-svg-icon").data(function(t){return[t]}),f=h.enter().append("svg");f.attr("class","d2b-legend-svg-icon").attr("width",p.width).attr("height",p.height),h=h.merge(f);var g=h.selectAll("text").data(c);g.exit().remove(),g=g.merge(g.enter().append("text")),g.text(function(t){return t}).style("stroke",o).style("fill",i?"white":o).attr("transform","translate("+b.x+","+b.y+")");var m=h.selectAll("path").data(u);m.exit().remove(),m=m.merge(m.enter().append("path")),m.style("stroke",o).style("fill",i?"white":o).attr("d",function(t){return e.type(t)()}).attr("transform","translate("+b.x+","+b.y+")")}),o.each(function(e,n){var o=t.allowEmptied(e,n),i=d3.select(this).selectAll(".d2b-legend-item"),l=function(e){i.each(function(r,n){t.setEmpty(r,n,e)})},d=function e(){var e=!0;return i.each(function(r,n){t.empty(r,n)||(e=!1)}),e},c=function(e,n){t.setEmpty(e,n,!t.empty(e,n)),!o&&d()&&l(!1),a.call(r),d3.select(this.parentNode).dispatch("change",{bubbles:!0})},u=function(e,n){l(!0),t.setEmpty(e,n,!1),a.call(r),d3.select(this.parentNode).dispatch("change",{bubbles:!0})};i.each(function(e,r){var n=t.clickable(e,r),a=t.dblclickable(e,r);d3.select(this).on("click",n?c:null).on("dblclick",a?u:null)})}),d.remove()};return base(r,t).addPropFunctor("values",function(t){return t}).addPropFunctor("key",function(t,e){return e}).addPropFunctor("color",function(t){return color(t.html)}).addPropFunctor("html",function(t){return t.html}).addPropFunctor("icon","").addPropFunctor("vertical",!1).addPropFunctor("allowEmptied",!1).addPropFunctor("clickable",!1).addPropFunctor("dblclickable",!1).addPropFunctor("empty",function(t){return t.empty}).addPropFunctor("setEmpty",function(t,e,r){return t.empty=r}),r}function chartFrame(){function t(t){var e={top:0,left:0,right:0,bottom:0};return"number"==typeof t?{top:t,left:t,right:t,bottom:t}:(["top","bottm","right","left"].forEach(function(r){t[r]&&e[r]==t[r]}),e)}function e(t,e){return{width:t&&t.width>0?t.width:e.width,height:t&&t.height>0?t.height:e.height}}function r(t,e,r){r(t),r(e)}function n(t,e,n,a,o,i){var l=t.node();if(l){n.style("top","").style("left","").style("right","").style("bottom","").style("width","").style("height","");var d=void 0;"right"===a||"left"===a?(t.classed("d2b-vertical",!0),d=l.getBoundingClientRect(),r(e,n,function(t){t.style(a,o[a]+"px").style("top",o.top+"px").style("height",i.height+"px")}),o[a]+=d.width,i.width-=d.width):"top"===a||"bottom"===a?(t.classed("d2b-vertical",!1),d=l.getBoundingClientRect(),r(e,n,function(t){t.style(a,o[a]+"px").style("left",o.left+"px").style("width",i.width+"px")}),o[a]+=d.height,i.height-=d.height):t.classed("d2b-vertical",!1)}}var a={},o=function o(i){var l=i.selection?i.selection():i,d=l.selectAll(".d2b-chart-frame").data(function(t){return[t]}),c=d.enter().append("div").attr("class","d2b-chart-frame");return d=d.merge(c),l.each(function(o){var d=d3.select(this).select(".d2b-chart-frame"),c=d,u=t(a.padding(o)),s=t(a.chartPadding(o)),p=e(a.size(o),this.getBoundingClientRect());r(d,c,function(t){t.style("width",p.width+"px").style("height",p.height+"px")}),p.width-=u.left+u.right,p.height-=u.top+u.bottom;var b=a.legendEnabled(o)?[o]:[],h=d.selectAll(".d2b-legend-frame").data(b),f=h.enter().append("div").attr("class","d2b-legend-frame"),g=h.exit();g.remove(),f.append("div").attr("class","d2b-legend-container"),h=h.merge(f);var m=h,v=a.breadcrumbsEnabled(o)?[o]:[],y=d.selectAll(".d2b-breadcrumbs-frame").data(v),x=y.enter().append("div").attr("class","d2b-breadcrumbs-frame"),P=y.exit();P.remove(),x.append("div").attr("class","d2b-breadcrumbs-container"),y=y.merge(x);var k=y,w=d.selectAll(".d2b-chart").data(function(t){return[t]}),F=w.enter().append("svg").attr("class","d2b-chart");F.append("g").attr("class","d2b-chart-container"),w=w.merge(F);var _=w;i!==l&&(c=c.transition(i),m=m.transition(i),k=k.transition(i),_=_.transition(i)),n(y,x,k,a.breadcrumbsOrient(o),u,p),n(h,f,m,a.legendOrient(o),u,p),r(F,_,function(t){t.style("left",u.left+"px").style("top",u.top+"px").style("width",p.width+"px").style("height",p.height+"px"),t.select(".d2b-chart-container").attr("transform","translate("+[s.left,s.top]+")")}),p.width-=s.left+s.right,p.height-=s.top+s.bottom,w.select(".d2b-chart-container").node().__size__=p}),o};return base(o,a).addPropFunctor("size",null).addPropFunctor("legendEnabled",!0).addPropFunctor("legendOrient","bottom").addPropFunctor("breadcrumbsEnabled",!1).addPropFunctor("breadcrumbsOrient","right").addPropFunctor("chartPadding",10).addPropFunctor("padding",10),o}function mean(t,e,r){var n=0,a=0;if(r=functor(r||1),e=functor(e||function(t){return t}),t.filter(function(t){return!isNaN(number(r(t)))&&!isNaN(number(e(t)))}).forEach(function(t){var o=r(t),i=e(t);n+=o,a+=i*o}),t.length&&n)return a/n}function median(t,e,r){r=functor(r||1),e=functor(e||function(t){return t});var n,a=[],o=t.filter(function(t){return 0!==r(t)&&!isNaN(number(r(t)))&&!isNaN(number(e(t)))}).sort(function(t,r){return d3.ascending(e(t),e(r))});n=Math.round(d3.sum(o,function(t){return r(t)})/2*1e12)/1e12;var i=0,l=!1;if(o.forEach(function(t){l&&(a.push(e(t)),l=!1),i+=r(t),i===n&&(a.push(e(t)),l=!0),i>n&&0===a.length&&a.push(e(t))}),t.length)return mean(a)}function mode(t,e,r){r=functor(r||1),e=functor(e||function(t){return t});var n=[],a=0,o={};if(t.forEach(function(t){var i=number(e(t));isNaN(e(t))||(o[i]=o[i]||0,o[i]+=r(t),o[i]>a?(a=o[e(t)],n=[e(t)]):o[e(t)]==a&&n.push(e(t)))}),t.length)return mean(n)}function range(t,e){e=functor(e||function(t){return t});var r=d3.extent(t,e);if(t.length)return r[1]-r[0]}function midpoint(t,e){if(e=functor(e||function(t){return t}),t.length)return d3.mean(d3.extent(t,e))}function toDegrees(t){return t*(180/Math.PI)}function toRadians(t){return t*(Math.PI/180)}function point(){function t(t,e){return i.empty.call(this,t,e)?0:1}function e(t,e){var r=i.size.call(this,t,e),n=i.empty.call(this,t,e);return d.size(n?r:2.5*r).call(this,t,e)}function r(t,e){var r=i.size.call(this,t,e),n=i.empty.call(this,t,e);return d.size(n?r/3:r).call(this,t,e)}function n(t,e){var r=i.size.call(this,t,e);return d.size(r).call(this,t,e)}function a(t,n){var a=i.empty.call(this,t,n);d3.select(this).select("path.d2b-point-back").transition().duration(100).attr("d",e),d3.select(this).select("path.d2b-point-front").transition().duration(100).style("opacity",a?.5:1).attr("d",r)}function o(t,e){var a=i.empty.call(this,t,e);d3.select(this).select("path.d2b-point-back").transition().duration(100).attr("d",n),d3.select(this).select("path.d2b-point-front").transition().duration(100).style("opacity",a?0:1).attr("d",r)}var i={},l=function e(l){var d=l.selection?l.selection():l,c=d.selectAll("path.d2b-point-back").data(function(t){return[t]});c.enter().append("path").attr("class","d2b-point-back").attr("d",n).style("fill-opacity",0).style("stroke",i.stroke).style("stroke-width",i.strokeWidth),l!==d&&(c=c.transition(l)),c.attr("d",n).style("stroke",i.stroke).style("stroke-width",i.strokeWidth);var u=d.selectAll("path.d2b-point-front").data(function(t){return[t]});return u.enter().append("path").attr("class","d2b-point-front").attr("d",r).style("opacity",t).style("fill",i.fill).style("stroke",i.stroke).style("stroke-width",i.strokeWidth),l!==d&&(u=u.transition(l)),u.attr("d",r).style("opacity",t).style("fill",i.fill).style("stroke",i.stroke).style("stroke-width",i.strokeWidth),d.each(function(t,e){var r=i.active.call(this,t,e);d3.select(this).on("mouseover.d2b-point",r?a:null).on("mouseout.d2b-point",r?o:null)}),e},d=d3.symbol();return base(l,i).addPropFunctor("size",150,null,function(t){return d.size(t)}).addPropFunctor("type",d3.symbolCircle,null,function(t){return d.type(t)}).addPropFunctor("active",!1).addPropFunctor("empty",!1).addPropFunctor("fill","steelblue").addPropFunctor("stroke",function(t,e){return d3.rgb(i.fill.call(this,t,e)).darker(.3)}).addPropFunctor("strokeWidth","1px"),l}function legend$1(){function t(t,n){t.selectAll(".d2b-legend-item").on("click",function(r,a){e.call(this,r,a,t,n)}).on("dblclick",function(e,a){r.call(this,e,a,t,n)})}function e(t,e,r,n){var o=a.clickable.call(this,t,e),l=a.allowEmptied.call(r.node(),r.datum(),n);if(o){a.setEmpty(t,e,!a.empty(t,e));var d=d3.select(this),c=r.selectAll(".d2b-legend-item"),u=!0;c.each(function(t,e){return u=!!a.empty(t,e)&&u}),u&&!l?(c.each(function(t,e){return a.setEmpty(t,e,!1)}).transition().duration(100).call(i),c.filter(function(e){return e!=t}).dispatch("change")):d.transition().duration(100).call(i),d.dispatch("change",{bubbles:!0})}}function r(t,e,r){var n=a.dblclickable.call(this,t,e);if(n){var o=r.selectAll(".d2b-legend-item");o.each(function(t,e){return a.setEmpty(t,e,!0)}),a.setEmpty(t,e,!1),o.transition().duration(100).call(i),o.filter(function(e){return e!=t}).dispatch("change"),d3.select(this).dispatch("change",{bubbles:!0})}}function n(t,e,r,n){var a=0,o=0;switch(n[1]){case"center":case"middle":o=r.height/2-e.height/2;break;case"bottom":o=r.height-e.height;break;case"top":default:o=0}switch(n[2]){case"center":case"middle":a=r.width/2-e.width/2;break;case"right":a=r.width-e.width;break;case"left":default:a=0}e.left=a,e.right=r.width-a+e.width,e.top=o,e.bottom=r.height-o+e.height,t.attr("transform","translate("+a+", "+o+")")}var a={},o=function e(r){return r.each(function(e,o){var d=d3.select(this),c=a.itemSize.call(this,e,o),u=a.size.call(this,e,o),s=a.orient.call(this,e,o).split(" "),p=s[0],b=a.maxTextLength.call(this,e,o),h=a.items.call(this,e,o);i.size(1.5*Math.pow(c/2,2)).strokeWidth(.1*c);var f=d.selectAll(".d2b-legend").data([h]),g=f.enter().append("g").attr("class","d2b-legend");f=f.merge(g);var m=f.selectAll(".d2b-legend-item").data(function(t){return t.sort(a.order)},a.key),v=m.enter().append("g").attr("class","d2b-legend-item").style("opacity",0);v.append("g").append("text");var y=m.exit();m=m.merge(v).style("cursor",function(t,e){var r=a.clickable.call(this,t,e),n=a.dblclickable.call(this,t,e);return r||n?"pointer":"auto"}),d.call(t,o);var x=m.select("g").attr("transform","translate("+c/2+", "+c/2+")"),P=m.select("text").attr("transform","translate("+c/1.5+", "+c/3+")").style("font-size",c+"px").call(textWrap,a.label,b);r.selection&&(y=y.transition(r).style("opacity",0),m=m.transition(r),x=x.transition(r),P=P.transition(r),f=f.transition(r)),y.remove(),x.call(i);var k=0;P.each(function(){k=Math.max(k,this.getBBox().width)}),k+=c;var w={x:c,y:5};v.call(l[p],{},w,c,u,k),this.__box__={width:0,height:0,top:0,left:0,right:0,bottom:0},m.style("opacity",1).call(l[p],this.__box__,w,c,u,k),g.call(n,this.__box__,u,s),f.call(n,this.__box__,u,s)}),e},i=point(),l={horizontal:function(t,e,r,n,a,o){var i=0,l=0,d=0;t.attr("transform",function(){var t=d3.select(this),c=n*t.selectAll("tspan").size(),u=t.select("text").node().getBBox().width;i+o>a.width&&(i=0,l+=d+r.y,d=0);var s="translate("+i+", "+l+")";return d=Math.max(d,c),e.width=Math.max(e.width,i+u+1.5*n),i+=o+r.x,s}),e.height=l+d},vertical:function(t,e,r,n,a){var o=0,i=0,l=0;t.attr("transform",function(){var t=d3.select(this),d=n*t.selectAll("tspan").size(),c=t.select("text").node().getBBox().width;i+d>a.height&&(o+=l+r.x+n,i=0,l=0);var u="translate("+o+", "+i+")";return l=Math.max(l,c),e.height=Math.max(e.height,i+d),i+=d+r.y,u}),e.width=o+l+1.5*n}};return base(o,a).addPropFunctor("items",function(t){return t}).addPropFunctor("itemSize",12).addPropFunctor("size",{width:960,height:500}).addPropFunctor("orient","vertical center right").addPropFunctor("maxTextLength",1/0).addPropFunctor("allowEmptied",!1).addPropFunctor("order",function(t,e){return d3.ascending(a.label(t),a.label(e))}).addPropFunctor("key",function(t,e){return e}).addPropFunctor("clickable",!1).addPropFunctor("dblclickable",!1).addPropFunctor("label",function(t){return t.label}).addPropFunctor("empty",function(t){return t.empty},null,function(t){return i.empty(t)}).addPropFunctor("setEmpty",function(t,e,r){t.empty=r}).addPropFunctor("active",!1,null,function(t){return i.active(t)}).addPropFunctor("symbol",d3.symbolCircle,null,function(t){return i.type(t)}).addPropFunctor("color",function(t){return color(t.label)},null,function(t){return i.fill(t)}).addMethod("box",function(t){var e=t.node?t.node():t;return e?e.__box__:null}),o}function svgPie(){function t(t,n,a){var o=e(t,n,a),i=r(t,n,a);return o?{startAngle:o.endAngle,endAngle:o.endAngle}:i?{startAngle:i.startAngle,endAngle:i.startAngle}:{startAngle:0,endAngle:0}}function e(t,e,r){for(var a=e.length;--t>=0;)for(var o=n.key(r[t].data,t),i=0;i<a;++i)if(n.key(e[i].data,i)===o)return e[i]}function r(t,e,r){for(var a=r.length,o=e.length;++t<a;)for(var i=n.key(r[t].data,t),l=0;l<o;++l)if(n.key(e[l].data,l)===i)return e[l]}var n={},a=function e(r){var a=r.selection?r.selection():r;return a.each(function(){var e=d3.select(this),o=e.selectAll(".d2b-pie-arc"),i=o.data();o=o.data(n.values,function(t,e){return n.key(t.data,e)});var l=o.enter().append("g").attr("class","d2b-pie-arc"),d=o.exit(),c=o.merge(l).order();l.append("path").attr("fill",function(t,e){return n.color.call(this,t.data,e)});var u=c.data();l.select("path").each(function(e,r){this.current=t(r,i,u)}),d.datum(function(e,r){var n=t(r,u,i);return n.data=e.data,n.innerRadius=e.innerRadius,n.outerRadius=e.outerRadius,n}),r!==a&&(d=d.transition(r),c=c.transition(r)),c.select("path").call(tweenArc,n.arc).attr("fill",function(t,e){return n.color.call(this,t.data,e)}),d.remove().select("path").call(tweenArc,n.arc)}),e};return base(a,n).addProp("arc",d3.arc()).addPropFunctor("key",function(t){return t.label}).addPropFunctor("values",function(t){return t}).addPropFunctor("color",function(t){return color(t.label)}),a}function line(){function t(t,r){var n=e.graphs(t,r).map(function(t,r){var n={data:t,index:r,align:e.align(t,r),tooltipGraph:e.tooltipGraph(t,r),shift:e.shift(t,r),stackBy:e.stackBy(t,r),key:e.key(t,r),color:e.color(t,r)};return n.values=e.values(t,r).map(function(t,r){var a={data:t,index:r,graph:n,x:e.px(t,r),y:e.py(t,r)};return a.y1=a.y,a.y0=0,a}),n});return o.entries(n).forEach(function(t){t.values.length>1&&a(t.values)}),n}var e={},r=function r(a){var o=a.selection?a.selection():a,i=o.selectAll(".d2b-line-graphs").data(function(t){return[t]});i=i.merge(i.enter().append("g").attr("class","d2b-line-graphs"));var l=i.selectAll(".d2b-line-graph").data(function(e,r){return t(e,r)},function(t){return t.key}),d=l.enter().append("g").attr("class","d2b-line-graph d2b-graph").style("opacity",0);d.append("path").attr("class","d2b-line").style("stroke",function(t){return t.color}).attr("d",function(t){var r=this.parentNode.parentNode,a=r.__d2bPreserveScaleX__,o=r.__d2bPreserveScaleY__;return n(t,a||e.x,o||e.y)});var c=l.merge(d).order(),u=l.exit(),s=c.select(".d2b-line");return a!==o&&(c=c.transition(a),u=u.transition(a),s=s.transition(a),u.style("opacity",0).select(".d2b-line").attr("d",function(t){return n(t,e.x,e.y)})),c.style("opacity",1),u.remove(),s.style("stroke",function(t){return t.color}).attr("d",function(t){return n(t,e.x,e.y,!0)}),i.each(function(){this.__d2bPreserveScaleX__=e.x.copy(),this.__d2bPreserveScaleY__=e.y.copy()}),r},n=function(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.shift;return null===o&&(o=r.bandwidth?r.bandwidth()/2:0),t.tooltipGraph&&a&&t.tooltipGraph.data(t.values).x(function(t){return r(t.x)+o}).y(function(e){return n(e[t.align])}).color(t.color),e.line.x(function(t){return r(t.x)+o}).y(function(e){return n(e[t.align])}),e.line(t.values)},a=stack().values(function(t){return t.values}).y(function(t){return t.y}).x(function(t){return t.x}),o=d3.nest().key(function(t){var e=t.stackBy;return e!==!1&&null!==e?e:d2bid()});return base(r,e).addProp("line",d3.line()).addProp("stack",a.stack(),null,function(t){return a.stack(t)}).addProp("x",d3.scaleLinear()).addProp("y",d3.scaleLinear()).addPropGet("type","line").addPropFunctor("graphs",function(t){
return t}).addPropFunctor("align","y1").addPropFunctor("tooltipGraph",function(t){return t.tooltipGraph}).addPropFunctor("shift",null).addPropFunctor("stackBy",null).addPropFunctor("key",function(t){return t.label}).addPropFunctor("values",function(t){return t.values}).addPropFunctor("color",function(t){return color(t.label)}).addPropFunctor("px",function(t){return t.x}).addPropFunctor("py",function(t){return t.y}).addMethod("getComputedGraphs",function(e){return(e.selection?e.selection():e).data().map(function(e,r){return t(e,r)})}).addMethod("getVisiblePoints",function(t){var e=r.getComputedGraphs(t);return e.map(function(t){return[].concat.apply([],t.map(function(t){return t.values.map(function(e){return{x:e.x,y:e[t.align],graph:t}})}))})[0]}),r}function area(){function t(t,r){var n=e.graphs(t,r).map(function(t,r){var n={data:t,index:r,tooltipGraph:e.tooltipGraph(t,r),shift:e.shift(t,r),stackBy:e.stackBy(t,r),key:e.key(t,r),color:e.color(t,r)};return n.values=e.values(t,r).map(function(t,r){var a={data:t,index:r,graph:n,x:e.px(t,r),y:e.py(t,r)};return a.y1=a.y,a.y0=0,a}),n});return o.entries(n).forEach(function(t){t.values.length>1&&a(t.values)}),n}var e={},r=function r(a){var o=a.selection?a.selection():a,i=o.selectAll(".d2b-area-graphs").data(function(t){return[t]});i=i.merge(i.enter().append("g").attr("class","d2b-area-graphs"));var l=i.selectAll(".d2b-area-graph").data(function(e,r){return t(e,r)},function(t){return t.key}),d=l.enter().append("g").attr("class","d2b-area-graph d2b-graph").style("opacity",0);d.append("path").attr("class","d2b-area").style("fill",function(t){return t.color}).attr("d",function(t){var r=this.parentNode.parentNode,a=r.__d2bPreserveScaleX__,o=r.__d2bPreserveScaleY__;return n(t,a||e.x,o||e.y)});var c=l.merge(d).order(),u=l.exit(),s=c.select(".d2b-area");return a!==o&&(c=c.transition(a),u=u.transition(a),s=s.transition(a),u.style("opacity",0).select(".d2b-area").attr("d",function(t){return n(t,e.x,e.y)})),c.style("opacity",1),u.remove(),s.style("fill",function(t){return t.color}).attr("d",function(t){return n(t,e.x,e.y,!0)}),i.each(function(){this.__d2bPreserveScaleX__=e.x.copy(),this.__d2bPreserveScaleY__=e.y.copy()}),r},n=function(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.shift;return null===o&&(o=r.bandwidth?r.bandwidth()/2:0),t.tooltipGraph&&a&&t.tooltipGraph.data(t.values).x(function(t){return r(t.x)+o}).y(function(t){return n(t.y1)}).color(t.color),e.area.x(function(t){return r(t.x)+o}).y0(function(t){return n(t.y0)}).y1(function(t){return n(t.y1)}),e.area(t.values)},a=stack().values(function(t){return t.values}).y(function(t){return t.y}).x(function(t){return t.x}),o=d3.nest().key(function(t){var e=t.stackBy;return e!==!1&&null!==e?e:d2bid()});return base(r,e).addProp("area",d3.area()).addProp("stack",a.stack(),null,function(t){return a.stack(t)}).addProp("x",d3.scaleLinear()).addProp("y",d3.scaleLinear()).addPropGet("type","area").addPropFunctor("graphs",function(t){return t}).addPropFunctor("tooltipGraph",function(t){return t.tooltipGraph}).addPropFunctor("shift",null).addPropFunctor("stackBy",null).addPropFunctor("key",function(t){return t.label}).addPropFunctor("values",function(t){return t.values}).addPropFunctor("color",function(t){return color(t.label)}).addPropFunctor("px",function(t){return t.x}).addPropFunctor("py",function(t){return t.y}).addMethod("getComputedGraphs",function(e){return(e.selection?e.selection():e).data().map(function(e,r){return t(e,r)})}).addMethod("getVisiblePoints",function(t){var e=r.getComputedGraphs(t);return e.map(function(t){var e=[].concat.apply([],t.map(function(t){return t.values.map(function(e){return{x:e.x,y:e.y0,graph:t}})})),r=[].concat.apply([],t.map(function(t){return t.values.map(function(e){return{x:e.x,y:e.y1,graph:t}})}));return e.concat(r)})[0]}),r}function scatter(){function t(t,e){var n=r.graphs(t,e).map(function(t,e){var n={data:t,index:e,align:r.align(t,e),tooltipGraph:r.tooltipGraph(t,e),shift:r.shift(t,e),stackBy:r.stackBy(t,e),key:r.key(t,e),color:r.color(t,e),symbol:r.symbol(t,e)};return n.values=r.values(t,e).map(function(t,e){var a={data:t,index:e,graph:n,x:r.px(t,e),y:r.py(t,e),color:r.pcolor(t,e),symbol:r.psymbol(t,e),key:r.pkey(t,e),size:r.psize(t,e)};return a.y1=a.y,a.y0=0,a}),n});return o.entries(n).forEach(function(t){t.values.length>1&&a(t.values)}),n}function e(t,e,r,n,a){t.attr("transform",function(t){var o=t[a];return"translate("+(e(t.x)+n)+", "+r(o)+")"})}var r={},n=function n(a){var o=a.selection?a.selection():a,i=o.selectAll(".d2b-scatter-graphs").data(function(t){return[t]});i=i.merge(i.enter().append("g").attr("class","d2b-scatter-graphs"));var l=i.selectAll(".d2b-scatter-graph").data(function(e,r){return t(e,r)},function(t){return t.key}),d=l.enter().append("g").attr("class","d2b-scatter-graph d2b-graph").style("opacity",0),c=l.merge(d).order(),u=l.exit();return a!==o&&(c=c.transition(a),u=u.transition(a),u.style("opacity",0).each(function(t){var n=d3.select(this),i=r.x,l=r.y,d=n.selectAll(".d2b-scatter-point");a!==o&&(d=d.transition(a));var c=t.shift;null===c&&(c=i.bandwidth?i.bandwidth()/2:0),d.style("opacity",0).call(e,i,l,c,t.align).remove()})),c.style("opacity",1),u.remove(),c.each(function(t){var n=d3.select(this),i=r.x,l=r.y,d=this.parentNode,c=d.__d2bPreserveScaleX__||i,u=d.__d2bPreserveScaleY__||l,s=t.shift;null===s&&(s=i.bandwidth?i.bandwidth()/2:0);var p=t.shift;null===p&&(s=c.bandwidth?c.bandwidth()/2:0),t.tooltipGraph&&t.tooltipGraph.data(t.values).x(function(t){return i(t.x)+s}).y(function(t){return l(t.y)}).color(function(e){return e.color||t.color}),r.point.fill(function(e){return e.color||t.color}).type(function(e){return e.symbol||t.symbol}).size(function(t){return t.size});var b=n.selectAll(".d2b-scatter-point").data(t.values,function(t){return t.key}),h=b.enter().append("g").attr("class","d2b-scatter-point"),f=b.merge(h).order(),g=b.exit();a!==o&&(f=f.transition(a),g=g.transition(a)),h.style("opacity",0).call(e,c,u,p,t.align),f.style("opacity",1).call(r.point).call(e,i,l,s,t.align),g.style("opacity",0).call(e,i,l,s,t.align).remove()}),i.each(function(){this.__d2bPreserveScaleX__=r.x.copy(),this.__d2bPreserveScaleY__=r.y.copy()}),n},a=stack().values(function(t){return t.values}).y(function(t){return t.y}).x(function(t){return t.x}),o=d3.nest().key(function(t){var e=t.stackBy;return e!==!1&&null!==e?e:d2bid()});return base(n,r).addProp("point",point().active(!0)).addProp("stack",a.stack(),null,function(t){return a.stack(t)}).addProp("x",d3.scaleLinear()).addProp("y",d3.scaleLinear()).addPropGet("type","scatter").addPropFunctor("graphs",function(t){return t}).addPropFunctor("align","y1").addPropFunctor("tooltipGraph",function(t){return t.tooltipGraph}).addPropFunctor("shift",null).addPropFunctor("stackBy",null).addPropFunctor("key",function(t){return t.label}).addPropFunctor("values",function(t){return t.values}).addPropFunctor("color",function(t){return color(t.label)}).addPropFunctor("symbol",function(){return d3.symbolCircle}).addPropFunctor("px",function(t){return t.x}).addPropFunctor("py",function(t){return t.y}).addPropFunctor("pcolor",null).addPropFunctor("psymbol",null).addPropFunctor("pkey",function(t,e){return e}).addPropFunctor("psize",25).addMethod("getComputedGraphs",function(e){return(e.selection?e.selection():e).data().map(function(e,r){return t(e,r)})}).addMethod("getVisiblePoints",function(t){var e=n.getComputedGraphs(t);return e.map(function(t){return[].concat.apply([],t.map(function(t){return t.values.map(function(e){return{x:e.x,y:e[t.align],graph:t}})}))})[0]}),n}function bar(){function t(t){return"horizontal"===t?{rotate:!0,px:"py",py:"px",x:"y",y:"x",w:"height",h:"width"}:{rotate:!1,px:"px",py:"py",x:"x",y:"y",w:"width",h:"height"}}function e(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t(d.orient(e,n)),o=d.graphs(e,n).map(function(t,e){var r={data:t,index:e,tooltipGraph:d.tooltipGraph(t,e),shift:d.shift(t,e),stackBy:d.stackBy(t,e),key:d.key(t,e),color:d.color(t,e)};return r.values=d.values(t,e).map(function(t,e){return{data:t,index:e,graph:r,key:d.pkey(t,e),x:d.px(t,e),y:d.py(t,e),centered:d.pcentered(t,e),color:d.pcolor(t,e)}}),r});return u.x(function(t){return t[a.x]}).y(function(t){return t[a.y]}),s.entries(o).forEach(function(t,e){return u.out(r(e))(t.values)}),l(o,d.baseline(e,n)),o}function r(t){var e={};return function(r,n,a,o){var i=e[o]=e[o]||[0,0];r.dy=a-n,r.stackIndex=t,r.base=o,r.dy>0?r.extent=[i[0],i[0]+=r.dy]:r.extent=[i[1],i[1]+=r.dy]}}function n(t,e,r){t.attr("transform",function(t){return"translate("+[e[r.x](t),e[r.y](t)]+")"})}function a(t,e,r,n){return function(a,o){var i=a.centered?o-e/4:o-e/2+a.stackIndex*r+n;return t(a.base)+i}}function o(t){var e=function(e){return[t(e.extent[0]),t(e.extent[1])]};return e.sorted=function(t){return e(t).slice().sort(d3.ascending)},e}function i(t,e,r){var n=[],a=1/0;e.forEach(function(e){var o=e.values,i=t.range();a=Math.min(a,Math.abs(i[1]-i[0])),o.forEach(function(e){n.push(t(e[r.x]))})}),n.sort(d3.ascending);for(var o=0;o<n.length-1;o++)n[o+1]!==n[o]&&(a=Math.min(n[o+1]-n[o],a));return a===1/0?0:a}function l(t,e){if(null===e){var r=[].concat.apply([],t.map(function(t){return t.values})),n=d3.extent(r.map(function(t){return t.extent[1]}));e=n[1]<0?n[1]:n[0]>0?n[0]:0}t.forEach(function(t){t.values.forEach(function(t){Math.abs(t.extent[0])<Math.abs(e)&&(t.extent[0]=e)})})}var d={},c=function r(l){var c=l.selection?l.selection():l,u={x:d.x,y:d.y};return c.each(function(r,p){var b=d.orient(r,p),h=t(b),f=e(r,p,h),g=u[h.x].copy(),m=u[h.y].copy(),v=d.padding(r,p),y=d.groupPadding(r,p),x=d.bandwidth(r,p);x=(1-v)*(x||i(g,f,h));var P=s.entries(f),k=x/Math.max(1,P.length);y*=k;var w=k-2*y,F=a(g,x,k,y),_=o(m),A=d3.select(this).selectAll(".d2b-bar-graphs").data(function(t){return[t]});A=A.merge(A.enter().append("g").attr("class","d2b-bar-graphs"));var z=A.node(),M=z.__d2bPreserveScaleBase__||F,E=z.__d2bPreserveScaleY__||m,B=z.__d2bPreserveTrueBarWidth__||w,G=A.selectAll(".d2b-bar-graph").data(f,function(t){return t.key}),S=G.enter().append("g").attr("class","d2b-bar-graph d2b-graph"),R=G.merge(S).order(),C=G.exit();l!==c&&(R=R.transition(l),C=C.transition(l),C.each(function(t){var e=t.shift;null===e&&(e=g.bandwidth?g.bandwidth()/2:0),d3.select(this).selectAll(".d2b-bar-group").transition(l).style("opacity",0).call(n,{x:function(t){return F(t,e)},y:function(){return m(0)}},h).select("rect").attr(h.w,w).attr(h.h,0)})),C.remove(),R.each(function(t){var e=d3.select(this),r=t.shift;null===r&&(r=g.bandwidth?g.bandwidth()/2:0);var a=e.selectAll(".d2b-bar-group").data(t.values,function(t){return t.key}),o=a.enter().append("g").attr("class","d2b-bar-group");o.append("rect");var i=a.merge(o).order(),d=a.exit();t.tooltipGraph&&t.tooltipGraph.data(t.values)[h.x](function(t){return g(t.base)+r})[h.y](function(t){return _(t)[1]}).color(function(e){return e.color||t.color}),l!==c&&(i=i.transition(l),d=d.transition(l)),o.attr("class","d2b-bar-group").style("opacity",0).call(n,{x:function(t){return M(t,r)},y:function(){return E(0)}},h).select("rect").attr("fill",function(e){return e.color||t.color}).attr(h.w,B).attr(h.h,0),i.style("opacity",1).call(n,{x:function(t){return F(t,r)},y:function(t){return _.sorted(t)[0]}},h).select("rect").attr("fill",function(e){return e.color||t.color}).attr(h.w,w).attr(h.h,function(t){return _.sorted(t)[1]-_.sorted(t)[0]}),d.style("opacity",0).call(n,{x:function(t){return F(t,r)},y:function(){return m(0)}},h).remove().select("rect").attr(h.w,w).attr(h.h,0)}),z.__d2bPreserveScaleY__=m,z.__d2bPreserveScaleBase__=F,z.__d2bPreserveTrueBarWidth__=w}),r},u=stack().values(function(t){return t.values}),s=d3.nest().key(function(t){return t.stackBy});return base(c,d).addProp("x",d3.scaleLinear()).addProp("y",d3.scaleLinear()).addPropGet("type","bar").addPropFunctor("graphs",function(t){return t}).addPropFunctor("padding",.5).addPropFunctor("groupPadding",0).addPropFunctor("bandwidth",null).addPropFunctor("baseline",0).addPropFunctor("tooltipGraph",function(t){return t.tooltipGraph}).addPropFunctor("orient","vertical").addPropFunctor("shift",null).addPropFunctor("stackBy",function(t,e){return e}).addPropFunctor("key",function(t){return t.label}).addPropFunctor("values",function(t){return t.values},null).addPropFunctor("color",function(t){return color(t.label)}).addPropFunctor("px",function(t){return t.x}).addPropFunctor("py",function(t){return t.y}).addPropFunctor("pcentered",!1).addPropFunctor("pcolor",null).addPropFunctor("pkey",function(t,e){return e}).addMethod("getComputedGraphs",function(t){return(t.selection?t.selection():t).data().map(function(t,r){return e(t,r)})}).addMethod("getVisiblePoints",function(r){return(r.selection?r.selection():r).data().map(function(r,n){var a=d.orient(r,n),o=t(a),i=e(r,n,o),l=[].concat.apply([],i.map(function(t){return t.values.map(function(e){var r={};return r[""+o.x]=e.base,r[""+o.y]=e.extent[0],r.graph=t,r})})),c=[].concat.apply([],i.map(function(t){return t.values.map(function(e){var r={};return r[""+o.x]=e.base,r[""+o.y]=e.extent[1],r.graph=t,r})}));return l.concat(c)})[0]}),c}function bubblePack(){function t(e,r,n){return{data:e,index:r,graph:n,x:d.px(e,r),y:d.py(e,r),color:d.pcolor(e,r)||n.color,symbol:d.psymbol(e,r)||n.symbol,key:d.pkey(e,r),size:d.psize(e,r),indicator:d.pindicator(e,r),children:(d.pchildren(e,r)||[]).map(function(e,r){return t(e,r,n)})}}function e(e,r){var n=d.graphs(e,r).map(function(e,r){var n={data:e,index:r,tendancy:d.tendancy(e,r),tooltipGraph:d.tooltipGraph(e,r),shift:d.shift(e,r),key:d.key(e,r),color:d.color(e,r),symbol:d.symbol(e,r)};return n.values=d.values(e,r).map(function(e,r){return t(e,r,n)}),n});return n.forEach(function(t){return t.values.forEach(function(e){return l(e,t.tendancy)})}),n}function r(t,e){t.data.expanded=e,t.children.forEach(function(t){return r(t,e)})}function n(t,e){var r=5,n=5;t.selectAll(".d2b-bubble-indicator.d2b-active").attr("transform",function(){var t=this.getBBox();t.width+r>e&&r>0&&(r=5,n+=t.height+5);var a="translate("+r+", "+n+")";return r+=t.width+5,a})}function a(t,e,r,n,a){t.each(function(t){var o=d3.select(this),i=o.attr("transform");i||o.attr("transform","translate("+(r(t.parent?t.parent.x:t.x)+a+",")+(n(t.parent?t.parent.y:t.y)+")")),t.children.length&&!t.data.expanded?o.attr("cursor","pointer").on("click",function(){d3.select(this).dispatch("change",{bubbles:!0,cancelable:!0})}).on("change",function(t){return t.data.expanded=!t.data.expanded}):o.attr("cursor","").on("click",null),e&&(o=o.transition(e)),t.data.expanded?o.style("opacity",0).selectAll("*").remove():o.style("opacity",null).call(d.point),o.attr("transform","translate("+(r(t.x)+a)+", "+n(t.y)+")")})}function o(t){t.each(function(t){var e=d3.select(this).classed("d2b-active",t.data.expanded);if(!t.data.expanded)return e.selectAll("rect, text, path").remove();var n=e.select("rect"),a=e.select("text"),o=e.select("path");n.size()||(n=e.append("rect")),a.size()||(a=e.append("text")),o.size()||(o=e.append("path")),a.text(function(t){return t.indicator.substring(0,5)}).attr("x",20);var i=a.node().getBBox();a.attr("y",i.height/1.35),n.on("click",function(){d3.select(this).dispatch("change",{bubbles:!0,cancelable:!0})}).on("change",function(t){t.data.expanded=!t.data.expanded,t.data.expanded||r(t,!1)}).attr("width",i.width+25).attr("height",i.height).style("fill",d.point.fill()).style("stroke",d.point.stroke()),o.attr("d",function(t){return c.type(t.symbol)()}).attr("transform","translate(10, 9.5)").style("fill",d.point.stroke())})}function i(t,e,r,n,l,d,c,u,s,p,b){var h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=t.selectAll(".d2b-bubble-pack.d2b-depth-"+h).data(e,function(t){return t.key}),g=f.enter().append("g").attr("class","d2b-bubble-pack d2b-depth-"+h),m=f.merge(g),v=g.append("g").attr("class","d2b-bubble-point");b&&a(v,!1,d,c,u),v.style("opacity",0),a(m.select(".d2b-bubble-point"),r,n,l,u),g.append("g").attr("class","d2b-bubble-indicator"),o(m.select(".d2b-bubble-indicator")),m.each(function(t){var e=d3.select(this),a=e.selectAll(".d2b-bubble-pack");a=r?a.transition(r):a,t.children.length&&t.data.expanded?i(e,t.children,r,n,l,d,c,u,s,p,b,h+1):(p&&p(t),a.remove().select(".d2b-bubble-point").style("opacity",0).attr("transform","translate("+[n(t.x)+u,l(t.y)]+")"))});var y=f.exit();r&&(y=y.transition(r)),y.remove()}function l(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t.children=t.children||[],t.leaves=t.children.length?[]:[t],t.depth=r,t.children.length&&t.children.forEach(function(n){l(n,e,r+1),n.parent=t,t.leaves=t.leaves.concat(n.leaves)}),t.size=t.size||d3.sum(t.leaves,function(t){return t.size}),t.x=t.x||(e.x||e)(t.leaves,function(t){return t.x},function(t){return t.size}),t.y=t.y||(e.y||e)(t.leaves,function(t){return t.y},function(t){return t.size})}var d={},c=d3.symbol().size(80),u=function t(r){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=r.selection?r:null,l=r.selection?r.selection():r,c=l.selectAll(".d2b-bubble-pack-graphs").data(function(t){return[t]});c=c.merge(c.enter().append("g").attr("class","d2b-bubble-pack-graphs"));var u=c.selectAll(".d2b-bubble-pack-graph").data(function(t,r){return e(t,r)},function(t){return t.key}),s=u.enter().append("g").attr("class","d2b-bubble-pack-graph d2b-graph"),p=u.merge(s).order(),b=u.exit();return o&&(p=p.transition(o),b=b.transition(o)),p.style("opacity",1),b.style("opacity",0).remove(),r.each(function(e,r){var l=d3.select(this),c=d.duration(e,r),u=l.selectAll(".d2b-bubble-pack-graph"),s=l.selectAll(".d2b-bubble-pack-graphs").node(),p=s.__d2bPreserveScaleX__||d.x,b=s.__d2bPreserveScaleY__||d.y;l.on("change",function(){l.transition().duration(c).call(t,!1)});var h=0;u.each(function(t){var e=d3.select(this),r=d.x.range();h=Math.max(h,Math.abs(r[0]-r[1]));var n=t.shift;null===n&&(n=d.x.bandwidth?d.x.bandwidth()/2:0),d.point.active(function(t){return!!t.children.length}).fill(function(t){return t.color}).type(function(t){return t.symbol});var c=t.tooltipGraph?t.tooltipGraph.clear().x(function(t){return d.x(t.x)+n}).y(function(t){return d.y(t.y)}).color(function(t){return t.color}).addPoint:null;i(e,t.values,o,d.x,d.y,p,b,n,l,c,a)}),n(l,h)}),c.each(function(){this.__d2bPreserveScaleX__=d.x.copy(),this.__d2bPreserveScaleY__=d.y.copy()}),t};return base(u,d).addProp("point",point().size(function(t){return 100*t.size})).addProp("x",d3.scaleLinear()).addProp("y",d3.scaleLinear()).addPropGet("type","bubblePack").addPropFunctor("duration",250).addPropFunctor("graphs",function(t){return t}).addPropFunctor("tendancy",mean,function(t){return arguments.length?(t&&t.tendancy?d.tendancy=function(){return t}:d.tendancy=functor(t),u):d.tendancy}).addPropFunctor("tooltipGraph",function(t){return t.tooltipGraph}).addPropFunctor("shift",null).addPropFunctor("key",function(t){return t.label}).addPropFunctor("values",function(t){return t.values}).addPropFunctor("color",function(t){return color(t.label)}).addPropFunctor("symbol",function(){return d3.symbolCircle}).addPropFunctor("px",function(t){return t.x}).addPropFunctor("py",function(t){return t.y}).addPropFunctor("psize",function(t){return t.size}).addPropFunctor("pchildren",function(t){return t.children}).addPropFunctor("pcolor",null).addPropFunctor("psymbol",null).addPropFunctor("pindicator",function(t){return t.label}).addPropFunctor("pkey",function(t,e){return e}).addMethod("getComputedGraphs",function(t){return(t.selection?t.selection():t).data().map(function(t,r){return e(t,r)})}).addMethod("getVisiblePoints",function(t){function e(t,r,n){t.data.expanded?t.children.forEach(function(t){return e(t,r,n)}):r.push({x:t.x,y:t.y,graph:n})}var r=u.getComputedGraphs(t);return r.map(function(t){return[].concat.apply([],t.map(function(t){var r=[];return t.values.forEach(function(n){return e(n,r,t)}),r}))})[0]}),u}function svgSunburst(){function t(t){return e(d3.hierarchy(t,p.children).sum(p.size))}function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.key=p.key(t.data,r),t.color=p.color(t.data,r),t.label=p.label(t.data,r),t.children)return t.children.forEach(e),t}function r(t){var e=null;return t.each(function(t){t.data.selected&&(e=t)}),e||(e=t),e.data.selected=!0,e}function n(t,e){t.ancestors().concat(t.descendants()).filter(function(t){return t.depth<=e&&t.value>0}).forEach(function(t){return t.visible=!0})}function a(t,e,r,n){var a=p.innerRadius(t,e),o=p.outerRadius(t,e),i=p.ancestorPadding(t,e),l=p.ancestorRatio(t,e),d=0;r.each(function(t){t.visible&&(d=Math.max(d,t.depth))});var c=o-a-i,u=a+c*l,s=p.ancestorBanding.copy().range([a,u]).domain([0,n.depth+1]),b=p.descendantBanding.copy().range([u+i,o]).domain([n.depth+1,d+1]);return function(t){var e=void 0;return e=t<=n.depth?s:b,{inner:e(t),outer:e(t+1)}}}function o(t){return t>Math.PI?toDegrees(t)+90:toDegrees(t)-90}function i(t,e){var r=(e.inner-e.outer)/2.2;return t>Math.PI?-r:r}function l(t){return t>Math.PI?"end":"start"}function d(t,e,r,n,a,u){var s="arc"===e?tweenArc:tweenCentroid;t=t.filter(function(t){return t.visible}),p.pie.startAngle(n).endAngle(a),p.pie(t).forEach(function(t){var e=u.radii(t.data.depth);t.data.startAngle=t.startAngle,t.data.endAngle=t.endAngle,t.data.padAngle=t.padAngle,t.data.innerRadius=e.inner,t.data.outerRadius=e.outer,t.data.centerAngle=(t.startAngle+t.endAngle)/2,t.data.rotate=o(t.data.centerAngle),t.data.labelOffset=i(t.data.centerAngle,e),t.data.labelAnchor=l(t.data.centerAngle)});var h=d3.select(this),f="d2b-sunburst-level-"+r,g=h.selectAll(".d2b-sunburst-"+e+"-group."+f),m=g.data();g=g.data(t,function(t){return t.key});var v=g.enter().append("g").attr("class","d2b-sunburst-"+e+"-group "+f),y=v.append("arc"===e?"path":"text").attr("class","d2b-sunburst-"+e+" "+f).each(function(e,r){var n=u.oldRadii(e.depth),a=e.neighbor||c(r,m,t);this.current={startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:n.inner,outerRadius:n.outer,rotate:o((a.startAngle+a.endAngle)/2)},e.children&&e.children.forEach(function(t){return t.neighbor=a})});v.append("g").attr("class","d2b-sunburst-"+e+"-children "+f),"arc"===e?y.style("fill",function(t){return t.color}):y.style("opacity",0).attr("y",4);var x=g.exit();g=g.merge(v),g.select(".d2b-sunburst-"+e+"."+f).classed("d2b-sunburst-ancestor",function(t){return t.depth<t.selected.depth}),u.transition&&(x.each(function(r,n){var a=c(n,t,m),l=d3.select(this),d=l.selectAll(".d2b-sunburst-"+e).datum(function(t){var e=u.radii(t.depth);return t.innerRadius=e.inner,t.outerRadius=e.outer,t.startAngle=a.startAngle,t.endAngle=a.endAngle,t.centerAngle=a.centerAngle,t.rotate=o(t.centerAngle),t.labelOffset=i(t.centerAngle,e),t}).transition(u.transition).call(s,b,{omit:["data","children","parent","selected"]});"label"===e&&d.style("opacity",0).attr("x",function(t){return t.labelOffset})}),x=x.transition(u.transition),g=g.transition(u.transition)),x.remove();var P=g.select(".d2b-sunburst-"+e+"."+f).call(s,b,{omit:["data","children","parent","selected"]});"arc"===e?P.style("fill",function(t){return t.color}):P.text(function(t){return t.depth>=t.selected.depth?t.label:""}).style("opacity",1).attr("x",function(t){return t.labelOffset}).style("text-anchor",function(t){return t.labelAnchor}),g.select(".d2b-sunburst-"+e+"-children."+f).each(function(t){var n=t.children||[];d.call(this,n,e,r+1,t.startAngle,t.endAngle,u)})}function c(t,e,r){var n=u(t,e,r),a=s(t,e,r);return n?{startAngle:n.endAngle,endAngle:n.endAngle}:a?{startAngle:a.startAngle,endAngle:a.startAngle}:{startAngle:0,endAngle:0,centerAngle:0}}function u(t,e,r){for(var n=e.length;--t>=0;)for(var a=r[t].key,o=0;o<n;++o)if(e[o].key===a)return e[o]}function s(t,e,r){for(var n=r.length,a=e.length;++t<n;)for(var o=r[t].key,i=0;i<a;++i)if(e[i].key===o)return e[i]}var p={},b=d3.arc(),h=function e(o){var i=o.selection?o.selection():o;return p.pie.value(function(t){return t.value}),i.each(function(l,c){var u=d3.select(this),s=p.zoomable(l,c),b=p.highlight(l,c),h=p.innerRadius(l,c),f=p.showLabels(l,c),g=t(l),m=r(g);n(m,p.descendantLevels(l,c)+m.depth),g.each(function(t){return t.selected=m});var v=a(l,c,g,m);d.call(this,[g],"arc",0,p.startAngle(l,c),p.endAngle(l,c),{transition:o!==i?o:null,oldRadii:this.oldRadii||v,radii:v,zoomable:s}),d.call(this,f?[g]:[],"label",0,p.startAngle(l,c),p.endAngle(l,c),{transition:o!==i?o:null,oldRadii:this.oldRadii||v,radii:v});var y=u.selectAll(".d2b-sunburst-center");y.data([m]).enter().append("circle").attr("class","d2b-sunburst-center").merge(y).attr("cx",0).attr("cy",0).attr("r",Math.max(0,h)).on("click",function(t){t.parent&&(t.data.selected=!1,t.parent.data.selected=!0,u.transition().duration(p.duration(t,c)).call(e))}),this.oldRadii=v,u.selectAll("path.d2b-sunburst-arc").on("click",s?function(t){g.each(function(t){return t.data.selected=!1}),t.data.selected=!0,u.transition().duration(p.duration(l,c)).call(e)}:null).on("mouseover",b?function(t){var e=t.ancestors();u.selectAll(".d2b-sunburst-arc").classed("d2b-transparent",function(t){return e.indexOf(t)===-1}),u.selectAll(".d2b-sunburst-label").classed("d2b-transparent",function(t){return e.indexOf(t)===-1})}:null).on("mouseout",function(){u.selectAll(".d2b-sunburst-arc").classed("d2b-transparent",!1),u.selectAll(".d2b-sunburst-label").classed("d2b-transparent",!1)})}),e};return base(h,p).addProp("pie",d3.pie().sort(null)).addProp("ancestorBanding",d3.scaleLinear()).addProp("descendantBanding",d3.scalePow().exponent(.85)).addPropFunctor("duration",250).addPropFunctor("innerRadius",30).addPropFunctor("outerRadius",200).addPropFunctor("ancestorPadding",10).addPropFunctor("ancestorRatio",.2).addPropFunctor("descendantLevels",1/0).addPropFunctor("startAngle",0).addPropFunctor("endAngle",2*Math.PI).addPropFunctor("showLabels",!1).addPropFunctor("zoomable",!0).addPropFunctor("highlight",!0).addPropFunctor("key",function(t){return t.label}).addPropFunctor("label",function(t){return t.label}).addPropFunctor("color",function(t){return color(t.label)}).addPropFunctor("children",function(t){return t.children}).addPropFunctor("size",function(t){return t.size}),h}function plane(){function t(t,e,r,n,a){var o=[],i=[],d=t.data;d&&(l(t,d,e,r,n),o=[d],t.info.showGrid&&(i=[d])),t.update=r.selectAll(".d2b-"+t.type+"-axis").data(o),t.enter=t.update.enter().append("g").attr("class","d2b-axis d2b-"+t.type+"-axis"),t.labelEnter=t.enter.append("text").attr("class","d2b-axis-label"),t.svg=t.enter.merge(t.update),t.label=t.svg.select(".d2b-axis-label"),t.update.exit().remove(),t.gridUpdate=r.selectAll(".d2b-"+t.type+"-grid").data(i),t.gridEnter=t.gridUpdate.enter().append("g").attr("class","d2b-grid d2b-"+t.type+"-grid"),t.gridUpdate.exit().remove(),t.grid=t.gridEnter.merge(t.gridUpdate),a&&(t.svg=t.svg.transition(a),t.update=t.update.transition(a),t.grid=t.grid.transition(a),t.gridUpdate=t.gridUpdate.transition(a),t.label=t.label.transition(a))}function e(t,e,r,n){t.data&&(o(t),i(t,e),t.enter.call(t.info.axis).attr("transform","translate("+r+", "+n+")"),t.update.call(t.info.axis).attr("transform","translate("+r+", "+n+")"),t.svg.call(b,t).on("end",function(){t.svg.call(b,t)}))}function r(t,e,r){t.data&&(a(t,r),i(t,e),t.gridUpdate.call(t.info.axis).selectAll(".tick text").remove(),t.gridEnter.call(t.info.axis).selectAll(".tick text").remove())}function n(t,e){t.data&&(t.labelEnter.text(t.info.label).attr("x",s(t,e)).attr("y",u(t)).attr("text-anchor",d(t)),t.label.text(t.info.label).attr("x",s(t,e)).attr("y",u(t)).attr("text-anchor",d(t)))}function a(t,e){if(t.data)switch(t.type){case"x":return t.info.axis.tickSize("inner"===t.info.orient?-e:e);case"x2":return t.info.axis.tickSize("inner"===t.info.orient?e:-e);case"y":return t.info.axis.tickSize("inner"===t.info.orient?e:-e);case"y2":return t.info.axis.tickSize("inner"===t.info.orient?-e:e)}}function o(t){t.data&&t.info.axis.tickSizeOuter(0).tickSizeInner(t.info.tickSize)}function i(t,e){t.data&&(["y","y2"].indexOf(t.type)>-1?t.info.axis.scale().range([e,0]):t.info.axis.scale().range([0,e]))}function l(t,e,r,n,a){if(t.data){var l=t.info={};l.axis=g.axis(e,r),l.orient=g.orient(e,r),l.wrapLength=g.wrapLength(e,r),l.label=g.label(e,r)||"",l.labelOrient=g.labelOrient(e,r),l.tickSize=g.tickSize(e,r),l.showGrid=g.showGrid(e,r),l.labelOrient1=l.labelOrient.split(" ")[0],l.labelOrient2=l.labelOrient.split(" ")[1],l.wrapAnchor=c(t),o(t),i(t,a);var d=n.append("g").attr("class","d2b-axis d2b-"+t.type+"-axis").call(l.axis).call(b,t);l.axisBox=d.node().getBBox();var u=d.append("text").attr("class","d2b-axis-label d2b-"+t.type+"-label").text(l.label);l.labelBox=u.node().getBBox(),d.remove()}}function d(t){if(t.data){var e=t.info,r=["y","y2"].indexOf(t.type)>-1;return"start"===e.labelOrient2&&r?"end":"end"!==e.labelOrient2||r?"middle"===e.labelOrient2?"middle":"start":"end"}}function c(t){if(t.data)switch(t.type){case"x":return"inner"===t.info.orient?"end":"start";case"x2":return"outer"===t.info.orient?"end":"start";case"y":case"y2":return"middle";default:return"start"}}function u(t){if(t.data){var e=t.info;switch(t.type+" "+e.orient+" "+e.labelOrient1){case"x inner inner":case"x2 outer outer":return-e.axisBox.height-m;case"x inner outer":case"x2 outer inner":return e.labelBox.height+m;case"x outer inner":case"x2 inner outer":case"y inner outer":case"y2 outer inner":return-m;case"x outer outer":case"x2 inner inner":return e.labelBox.height+e.axisBox.height+m;case"y inner inner":case"y2 outer outer":return e.labelBox.height+e.axisBox.width+m;case"y outer inner":case"y2 inner outer":return e.labelBox.height+m;case"y outer outer":case"y2 inner inner":return-e.axisBox.width-m}}}function s(t,e){if(t.data)return"start"===t.info.labelOrient2?0:"middle"===t.info.labelOrient2?e/2:e}function p(t){var e={top:0,left:0,right:0,bottom:0};return t.x.data&&("outer"===t.x.info.orient&&(e.bottom+=t.x.info.axisBox.height),"outer"===t.x.info.labelOrient1&&(e.bottom+=t.x.info.labelBox.height+m)),t.x2.data&&("outer"===t.x2.info.orient&&(e.top+=t.x2.info.axisBox.height),"outer"===t.x2.info.labelOrient1&&(e.top+=t.x2.info.labelBox.height)),t.y.data&&("outer"===t.y.info.orient&&(e.left+=t.y.info.axisBox.width),"outer"===t.y.info.labelOrient1&&(e.left+=t.y.info.labelBox.height)),t.y2.data&&("outer"===t.y2.info.orient&&(e.right+=t.y2.info.axisBox.width),"outer"===t.y2.info.labelOrient1&&(e.right+=t.y2.info.labelBox.height+m)),e.top=Math.max(e.top,10),e.bottom=Math.max(e.bottom,10),e.left=Math.max(e.left,10),e.right=Math.max(e.right,10),e}function b(t,e){if(e.data){var r=e.info.wrapLength,n=e.info.wrapAnchor;t.selectAll(".tick text").each(function(){var t=d3.select(this);(t.html()||"").indexOf("tspan")===-1&&(this.storeText=t.text()),t.text("")}).call(textWrap,function(){return this.storeText},r,n)}}function h(t){return"number"==typeof t?{top:t,left:t,right:t,bottom:t}:t}function f(t){return h(t||0)}var g={},m=5,v=function a(o){var i=o.selection?o.selection():o;return i.each(function(a,l){var d=g.size.call(this,a,l)||{width:960,height:500},c=f(g.margin.call(this,a,l)),u=g.x.call(this,a,l),s=g.x2.call(this,a,l),b=g.y.call(this,a,l),m=g.y2.call(this,a,l),v=d3.select(this),y={x:{type:"x",data:u},x2:{type:"x2",data:s},y:{type:"y",data:b},y2:{type:"y2",data:m}},x=h(g.padding.call(this,a,l)),P=v.selectAll(".d2b-plane").data([a]),k=P.enter().append("g").attr("class","d2b-plane"),w=P.merge(k),F=o!==i?o:null;t(y.x,l,w,d.width,F),t(y.x2,l,w,d.width,F),t(y.y,l,w,d.height,F),t(y.y2,l,w,d.height,F),x||(x=p(y));var _={top:x.top+c.top,bottom:x.bottom+c.bottom,left:x.left+c.left,right:x.right+c.right};_.width=d.width-_.left-_.right,_.height=d.height-_.top-_.bottom,this.__box__=_,F&&(P=P.transition(F)),k.attr("transform","translate("+_.left+", "+_.top+")"),P.attr("transform","translate("+_.left+", "+_.top+")"),e(y.x,_.width,0,_.height),e(y.x2,_.width,0,0),e(y.y,_.height,0,0),e(y.y2,_.height,_.width,0),r(y.x,_.width,_.height),r(y.x2,_.width,_.height),r(y.y,_.height,_.width),r(y.y2,_.height,_.width),n(y.x,_.width),n(y.x2,_.width),n(y.y,-_.height),n(y.y2,-_.height)}),a};return base(v,g).addPropFunctor("size",function(t){
return t.size}).addPropFunctor("padding",null).addPropFunctor("margin",0).addPropFunctor("x",function(t){return t.x}).addPropFunctor("x2",function(t){return t.x2}).addPropFunctor("y",function(t){return t.y}).addPropFunctor("y2",function(t){return t.y2}).addPropFunctor("axis",function(t){return t.axis}).addPropFunctor("orient",function(t){return t.orient||"outer"}).addPropFunctor("wrapLength",function(t){return t.wrapLength||1/0}).addPropFunctor("tickSize",function(t){return t.tickSize||6}).addPropFunctor("showGrid",function(t){return t.showGrid===!1}).addPropFunctor("label",function(t){return t.label}).addPropFunctor("labelOrient",function(t){return t.labelOrient||"outer middle"}).addMethod("box",function(t){var e=t.node?t.node():t;return e?e.__box__:null}),v}function chartPie(){function t(t,u){var s=d3.select(this),p=s.select(".d2b-chart-container"),b=p.node().__size__,h=a.radius(t,b.width,b.height),f=a.startAngle(t),g=a.endAngle(t),m=a.donutRatio(t),v=a.legend.empty(),y=a.values(t).filter(function(t){return!v(t)});a.legend.html(a.label),s.select(".d2b-legend-container").call(a.legend).on("change",function(){return s.transition(a.duration(t)).call(o)}).selectAll(".d2b-legend-item").on("mouseover",function(t){r.call(this,s,t)}).on("mouseout",function(t){n.call(this,s,t)});var x=d3.sum(y,function(t){return a.value(t)}),P=p.selectAll(".d2b-pie-chart").data([y]),k=P.enter().append("g").attr("class","d2b-pie-chart"),w=function(t){return t=i.startAngle(f).endAngle(g)(t),t.forEach(function(t){t.outerRadius=h,t.innerRadius=h*m}),t};P=P.merge(k).datum(w),u&&(P=P.transition(u)),P.call(d);var F=p.selectAll(".d2b-pie-arc").each(function(t){this.__outerRadius__=t.outerRadius,t.__percent__=t.value/x}).on("mouseover",function(t){r.call(this,s,t.data)}).on("mouseout",function(t){n.call(this,s,t.data)}).call(a.tooltip),_=F.selectAll(".d2b-pie-arc-percent").data(function(t){return[t]});_.enter().append("g").attr("class","d2b-pie-arc-percent").append("text").attr("y",6),F.each(function(){var t=d3.select(this),e=t.select(".d2b-pie-arc path").node().current,r=t.select(".d2b-pie-arc-percent"),n=r.select("text").node();r.node().current=e,n.current=n.current||0}),u&&(F=F.each(function(){this.transitioning=!0}).transition(u).on("end",function(){this.transitioning=!1})),F.select(".d2b-pie-arc-percent").call(tweenCentroid,l).select("text").call(tweenNumber,function(t){return a.value(t.data)/x},c).style("opacity",function(t){return a.showPercent.call(this,t.data,x)?1:0});var A=e(t,h,b);k.attr("transform","translate("+A.x+", "+A.y+")"),P.attr("transform","translate("+A.x+", "+A.y+")")}function e(t,e,r){var n=a.center(t,r.width,r.height,e),o=a.at(t,r.width,r.height).split(" ");if(!n){switch(o={x:o[1],y:o[0]},n={},o.x){case"left":n.x=e;break;case"center":case"middle":n.x=r.width/2;break;case"right":default:n.x=r.width-e}switch(o.y){case"bottom":n.y=r.height-e;break;case"center":case"middle":n.y=r.height/2;break;case"top":default:n.y=e}}return n}function r(t,e){this.transitioning||t.selectAll(".d2b-pie-arc").filter(function(t){return t.data===e}).each(function(t){t.outerRadius=1.03*this.__outerRadius__}).select("path").transition().duration(100).call(tweenArc,l)}function n(t,e){this.transitioning||t.selectAll(".d2b-pie-arc").filter(function(t){return t.data===e}).each(function(t){t.outerRadius=this.__outerRadius__}).select("path").transition().duration(100).call(tweenArc,l)}var a={},o=function e(r){r.call(a.chartFrame);var n=r.selection?r.selection():r;return n.each(function(e){t.call(this,e,r!==n?r:null)}),e},i=d3.pie().sort(null),l=d3.arc().outerRadius(function(t){return t.outerRadius}).innerRadius(function(t){return t.innerRadius}),d=svgPie().arc(l),c=d3.format(".0%");return base(o,a).addProp("chartFrame",chartFrame().legendEnabled(!0).breadcrumbsEnabled(!1)).addProp("legend",legend().clickable(!0).dblclickable(!0)).addProp("key",function(t){return t.label},null,function(t){a.legend.key(t),d.key(t)}).addProp("tooltip",tooltip().followMouse(!0).html(function(t){return"<b>"+a.label(t.data)+"</b>: "+a.value(t.data)+" ("+c(t.__percent__)+")"})).addPropFunctor("duration",250).addPropFunctor("values",function(t){return t}).addPropFunctor("donutRatio",0).addPropFunctor("startAngle",0).addPropFunctor("endAngle",2*Math.PI).addPropFunctor("at","center center").addPropFunctor("showPercent",function(t,e){return a.value(t)/e>.03}).addPropFunctor("center",null).addPropFunctor("radius",function(t,e,r){return Math.min(e,r)/2}).addPropFunctor("sort",null).addPropFunctor("color",function(t){return color(t.label)},null,function(t){a.tooltip.color(function(e){return d3.rgb(t(e.data)).darker(.3)}),a.legend.color(t),d.color(t)}).addPropFunctor("value",function(t){return t.value},null,function(t){return i.value(t)}).addPropFunctor("label",function(t){return t.label}),o}function chartAxis(){function t(t,n){var u=d3.select(this),b=u.select(".d2b-chart-container"),h=u.select(".d2b-legend-container"),g=b.node().__size__,m=r(t),v=a(m),y=s.duration(t),x=e(t,m);o(x);var P=this.tooltip=this.tooltip||tooltipAxis().trackX(!0).trackY(!1).threshold(50);P.title(function(t){return""+(t[0].x||t[0].x1)}).clear(),s.legend.values(x).empty(function(t){return t.data.hidden}).setEmpty(function(t,e,r){return t.data.hidden=r}).html(function(t){return t.label}).color(function(t){return t.color}),h.call(s.legend).on("change",function(){return u.transition().duration(y).call(p)}).selectAll(".d2b-legend-item").on("mouseover",function(t){return i(t,b)}).on("mouseout",function(t){return l(t,b)}),s.plane.size(g);var k=b.selectAll(".d2b-axis-plane").data([t]),w=k,F=k.enter().append("g").attr("class","d2b-axis-plane");k=k.merge(F);var _=b.selectAll(".d2b-axis-wrapper").data([t]),A=_,z=_.enter().append("g").attr("class","d2b-axis-wrapper");z.append("rect").attr("class","d2b-axis-background"),_=_.merge(z);var M=_.selectAll(".d2b-axis-set").data(m),E=M.enter().append("g").attr("class","d2b-axis-set"),B=M.exit();M=M.merge(E).order(),n&&(B=B.transition(n),A=A.transition(n),w=w.transition(n));var G={x:[],x2:[],y:[],y2:[]};M.each(function(t){var e=d3.select(this);this.genUpdate=e.selectAll(".d2b-graph-generator").data(t.generators,function(t){return t.key}),this.genEnter=this.genUpdate.enter().append("g").attr("class","d2b-graph-generator").style("opacity",0),this.genExit=this.genUpdate.exit(),this.gen=this.genUpdate.merge(this.genEnter).order(),this.gen.each(function(e,r){var n=d3.select(this),a=e.generator.tooltipGraph(function(t){if(r)return null;var e=P.graph(d2bid());return d(t,v).tooltipConfig(e),e}).color(function(t){return d(t,v).color}).graphs(t.graphs.map(function(t){return t.data}).filter(function(t){return!t.hidden})).getVisiblePoints(n);e.generator.duration&&e.generator.duration(y),a.forEach(function(t){var e=d(t.graph,v);G[e.xType||"x"].push(t.x),G[e.yType||"y"].push(t.y)})})});var S=s.x(t,G.x),R=s.y(t,G.y),C=s.x2(t,G.x2),O=s.y2(t,G.y2);c(S,G.x,f.x),c(R,G.y,f.y),c(C,G.x2,f.x2),c(O,G.y2,f.y2),s.plane.axis(function(t){return t.__axis__}).x(S.__axis__?S:null).y(R.__axis__?R:null).x2(C.__axis__?C:null).y2(O.__axis__?O:null),F.call(s.plane),w.call(s.plane);var T=s.plane.box(k);M.each(function(){n&&(this.genUpdate=this.genUpdate.transition(n),this.genExit=this.genExit.transition(n).style("opacity",0)),this.genExit.remove(),this.gen.each(function(t){var e=d3.select(this);n&&(e=e.transition(n)),t.generator.x(S.__axis__.scale()).y(R.__axis__.scale()),e.style("opacity",1).call(t.generator)}),d3.select(this).on("change",function(){return u.transition().duration(y).call(p)})}),B.style("opacity",0).remove(),z.attr("transform","translate("+T.left+", "+T.top+")").select("rect.d2b-axis-background").attr("height",Math.max(0,T.height)).attr("width",Math.max(0,T.width)),A.attr("transform","translate("+T.left+", "+T.top+")").select("rect.d2b-axis-background").attr("height",Math.max(0,T.height)).attr("width",Math.max(0,T.width)),P.row(function(t){var e=d(t.graph.data,v).label;return e+": "+(t.y||t.y1)}),s.tooltipConfig(P),P.svgContainer(_).tracker(_).size(T)}function e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r(t),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a(e),o=n.filter(function(t){return!t.group});return o.forEach(function(t){t.groupType="graph",t.groupGraphs=[t]}),(s.groups(t)||[]).map(function(t){var e={groupType:"group",data:t,label:s.groupLabel(t),color:s.groupColor(t)};return e.groupGraphs=n.filter(function(t){return e.label===t.group}),e.groupGraphs.forEach(function(t){t.color=e.color}),e}).concat(o)}function r(t){return s.sets(t).map(function(t){var e={};return{data:t,generators:s.setGenerators(t).map(function(t){var r=s.generator(t),n=r.type();return e[n]=e[n]||0,{data:t,key:n+"-"+(e[n]+=1),generator:r}}),graphs:n(t)}})}function n(t){return s.setGraphs(t).map(function(t){return{data:t,label:s.graphLabel(t)||"",color:s.graphColor(t),group:s.graphGroup(t),tooltipConfig:s.graphTooltipConfig||function(){}}})}function a(t){return[].concat.apply([],t.map(function(t){return t.graphs}))}function o(t){t.forEach(function(t){t.groupGraphs.forEach(function(e){return e.data.hidden=t.data.hidden})})}function i(t,e){var r=e.selectAll(".d2b-graph");t.groupGraphs.some(function(t){return!t.data.hidden})&&r.style("opacity",.2).filter(function(e){return t.data===e.data||(t.groupGraphs.map(function(t){return t.data})||[]).indexOf(e.data)>-1}).style("opacity","")}function l(t,e){e.selectAll(".d2b-graph").style("opacity",1)}function d(t,e){return e.filter(function(e){return e.data===t||e.data===t.data})[0]}function c(t,e,r){if(e.length){var n=t.axis||r.axis,a=t.scale?t.scale.copy():u(e,r),o=a.domain();if(!a.bandwidth&&t.linearPadding){var i=o[1]-o[0];o[0]=o[0]+i*t.linearPadding[0],o[1]=o[1]+i*t.linearPadding[1]}a.domain(o),t.__axis__=n.scale(a)}}function u(t,e){var r=t.some(function(t){return isNaN(t)}),n=r?d3.set(t).values():d3.extent(t),a=r?e.band:e.linear;return a.domain(n)}var s={},p=function e(r){r.call(s.chartFrame);var n=r.selection?r.selection():r;return n.each(function(e){t.call(this,e,r!==n?r:null)}),e};base(p,s).addProp("plane",plane()).addProp("chartFrame",chartFrame().legendEnabled(!0).breadcrumbsEnabled(!1)).addProp("legend",legend().clickable(!0).dblclickable(!0)).addPropFunctor("duration",250).addPropFunctor("x",function(){return{}}).addPropFunctor("y",function(){return{}}).addPropFunctor("x2",function(){return{}}).addPropFunctor("y2",function(){return{}}).addPropFunctor("tooltipConfig",function(t){return t.tooltipConfig}).addPropFunctor("groups",function(t){return t.groups}).addPropFunctor("sets",function(t){return t.sets}).addPropFunctor("generator",function(t){return t}).addPropFunctor("groupLabel",function(t){return t.label}).addPropFunctor("groupColor",function(t){return color(s.groupLabel(t))}).addPropFunctor("setGenerators",function(t){return t.generators}).addPropFunctor("setGraphs",function(t){return t.graphs}).addPropFunctor("graphLabel",function(t){return t.label}).addPropFunctor("graphGroup",function(t){return t.group}).addPropFunctor("graphColor",function(t){return color(s.graphLabel(t))}).addPropFunctor("graphTooltipConfig",function(t){return t.tooltipConfig});var b=d3.scaleBand(),h=d3.scaleLinear(),f={x:{band:b.copy(),linear:h.copy(),axis:d3.axisBottom()},y:{band:b.copy(),linear:h.copy(),axis:d3.axisLeft()},x2:{band:b.copy(),linear:h.copy(),axis:d3.axisTop()},y2:{band:b.copy(),linear:h.copy(),axis:d3.axisRight()}};return p}function chartSunburst(){function t(t,e){t.select(".d2b-breadcrumbs-container").datum(e).transition("sunburst-breadcrumbs").duration(100).call(n.breadcrumbs)}function e(r){var a=r.select(".d2b-sunburst-chart"),o=r.selectAll(".d2b-sunburst-arc.d2b-sunburst-level-0").datum(),i=o.selected;t(r,[i]),a.selectAll(".d2b-sunburst-arc").call(n.tooltip.clear).call(n.tooltip).on("mouseover.breadcrumbs",function(e){var n=e.ancestors();n=n.slice(0,n.indexOf(i)+1),t(r,n.reverse())}).on("mouseout.breadcrumbs",function(){return t(r,[i])}),a.on("mouseout",function(){return e(r)}).on("click",function(){return e(r)})}function r(t,r){var a=d3.select(this),o=a.select(".d2b-chart-container"),i=o.node().__size__,l="translate("+i.width/2+", "+i.height/2+")",d=o.selectAll(".d2b-sunburst-chart").data(function(t){return[t]}),c=d.enter().append("g").attr("transform",l).attr("class","d2b-sunburst-chart");d=d.merge(c),r&&(d=d.transition(r)),n.sunburst.outerRadius(n.outerRadius(t,i.width,i.height)).innerRadius(n.innerRadius(t,i.width,i.height)),d.attr("transform",l).call(n.sunburst),e(a)}var n={},a=function t(e){e.call(n.chartFrame);var a=e.selection?e.selection():e;return a.each(function(t){r.call(this,t,e!==a?e:null)}),t};base(a,n).addProp("chartFrame",chartFrame().legendEnabled(!1).breadcrumbsEnabled(!0)).addProp("sunburst",svgSunburst()).addProp("breadcrumbs",breadcrumbs()).addProp("tooltip",tooltip(),null,function(t){return t.color(function(t){return t.color})}).addPropFunctor("duration",250).addPropFunctor("outerRadius",function(t,e,r){return Math.min(e,r)/2}).addPropFunctor("innerRadius",function(t,e,r){return Math.min(50,Math.min(e,r)/4)});var o=d3.format(",.0f"),i=d3.format(".1%"),l=function(t){var e=t.value/t.selected.value,r=e>1?"":"<div class = 'd2b-sunburst-percent'>\n        "+i(t.value/t.selected.value)+"\n      </div>";return"\n      <div class = 'd2b-sunburst-label'>\n        "+t.label+"\n      </div>\n      <div class = 'd2b-sunburst-value'>\n        "+o(t.value)+"\n        "+r+"\n      </div>\n    "};return n.breadcrumbs.html(function(t){return"<div class = 'd2b-sunburst-breadcrumb'>"+l(t)+"</div>"}).color(function(t){return t.color}).key(function(t,e){return e}),n.tooltip.followMouse(!0).html(function(t){return"<div class = 'd2b-sunburst-tooltip'>"+l(t)+"</div>"}),a}Object.defineProperty(exports,"__esModule",{value:!0});var d3=require("d3");__$styleInject('@import "//netdna.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.css";.d2b-vue-container{width:100%;height:100%}.d2b-pie-chart .d2b-pie-arc path{stroke-width:1px;stroke:#fff}.d2b-pie-chart .d2b-pie-arc text{fill:#fff;font-weight:700;pointer-events:none;text-anchor:middle}.d2b-axis-wrapper .d2b-axis-background{opacity:0}.d2b-chart-breadcrumbs{width:200px;padding-left:10px}.d2b-sunburst-breadcrumb .d2b-sunburst-label,.d2b-sunburst-tooltip .d2b-sunburst-label{text-align:center}.d2b-sunburst-breadcrumb .d2b-sunburst-value,.d2b-sunburst-tooltip .d2b-sunburst-value{font-size:14pt;margin-top:5px}.d2b-sunburst-breadcrumb .d2b-sunburst-percent{float:right}.d2b-breadcrumbs:not(.d2b-vertical) .d2b-sunburst-percent{margin-left:30px}.d2b-sunburst-tooltip{text-align:center}.d2b-sunburst-tooltip .d2b-sunburst-percent{display:inline}.d2b-sunburst-tooltip .d2b-sunburst-percent:before{content:"("}.d2b-sunburst-tooltip .d2b-sunburst-percent:after{content:")"}.d2b-line-graph .d2b-line{stroke-width:1.5px;fill:none}.d2b-area-graph .d2b-area{stroke:none;fill-opacity:0.3}.d2b-bar-graph .d2b-bar-group rect{opacity:0.8}.d2b-bubble-pack-graph .d2b-bubble-point{opacity:0.75}.d2b-bubble-pack-graph .d2b-bubble-indicator rect{fill-opacity:0.25;stroke-opacity:0.9;cursor:pointer;stroke-width:1px}.d2b-bubble-pack-graph .d2b-bubble-indicator rect:hover{stroke-width:2px}.d2b-bubble-pack-graph .d2b-bubble-indicator path,.d2b-bubble-pack-graph .d2b-bubble-indicator text{pointer-events:none}.d2b-plane text{font-size:10pt}.d2b-plane .d2b-y2-axis .d2b-axis-label,.d2b-plane .d2b-y-axis .d2b-axis-label{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.d2b-plane .d2b-y2-axis .tick line,.d2b-plane .d2b-y-axis .tick line{stroke-width:0.6px}.d2b-plane .d2b-grid .tick line{stroke-width:0.2px;stroke-opacity:0.4;//:5 5}.d2b-plane .d2b-grid .tick text{display:none}.d2b-plane .d2b-axis-label{fill:#000;font-weight:700}.d2b-plane .tick line{//:#aaa}.d2b-plane path.domain{stroke-width:0.4px;stroke-opacity:0.4}.d2b-sunburst-arc{-webkit-transition:opacity 0.2s,stroke-width 0.2s;transition:opacity 0.2s,stroke-width 0.2s;cursor:pointer;opacity:0.9;stroke-width:0.8px;stroke:#fff}.d2b-sunburst-arc.d2b-transparent{fill-opacity:0.2}.d2b-sunburst-label{font-size:8pt;fill-opacity:0.8;pointer-events:none;font-family:arial}.d2b-sunburst-label.d2b-transparent{fill-opacity:0.2}.d2b-sunburst-center{fill-opacity:0;stroke:none;cursor:pointer}.d2b-sunburst-ancestor{opacity:0.4}.d2b-tooltip-area{pointer-events:none}.d2b-tooltip-area .d2b-tooltip{background:#fff;border:1px solid #bbb;border-radius:2px;position:fixed;box-shadow:0px 0px 2px #ccc}.d2b-tooltip-area .d2b-tooltip-content{padding:6px 10px}.d2b-tooltip-area .d2b-tooltip{margin:0}.d2b-tooltip-area .d2b-tooltip:before{left:0;top:0;position:absolute;z-index:2;content:""}.d2b-tooltip-area .d2b-tooltip-top{-webkit-transform:translate(-50%,-100%);transform:translate(-50%,-100%);margin-left:0;margin-top:-15px}.d2b-tooltip-area .d2b-tooltip-top:before{-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%;top:100%;width:0;height:0;border-style:solid;border-color:transparent;border-width:6px 6px 0;border-top-color:inherit}.d2b-tooltip-area .d2b-tooltip-bottom{-webkit-transform:translate(-50%,0);transform:translate(-50%,0);margin-left:0;margin-top:15px}.d2b-tooltip-area .d2b-tooltip-bottom:before{-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%;top:-6px;width:0;height:0;border-style:solid;border-color:transparent;border-width:0 6px 6px;border-bottom-color:inherit}.d2b-tooltip-area .d2b-tooltip-right{-webkit-transform:translate(0,-50%);transform:translate(0,-50%);margin-left:15px;margin-top:0}.d2b-tooltip-area .d2b-tooltip-right:before{-webkit-transform:translateY(-50%);transform:translateY(-50%);left:-6px;top:50%;width:0;height:0;border-style:solid;border-color:transparent;border-width:6px 6px 6px 0;border-right-color:inherit}.d2b-tooltip-area .d2b-tooltip-left{-webkit-transform:translate(-100%,-50%);transform:translate(-100%,-50%);margin-left:-15px;margin-top:0}.d2b-tooltip-area .d2b-tooltip-left:before{-webkit-transform:translateY(-50%);transform:translateY(-50%);left:100%;top:50%;width:0;height:0;border-style:solid;border-color:transparent;border-width:6px 0 6px 6px;border-left-color:inherit}.d2b-tooltip-axis-area{pointer-events:none;font-family:Arial}.d2b-tooltip-axis-area .d2b-tooltip-marker{stroke-width:2px;stroke:#bbb;stroke-dasharray:5,5}.d2b-tooltip-axis-area .d2b-tooltip{opacity:0.9;white-space:nowrap;border:1px solid #ddd;background:hsla(0,0%,100%,.8);position:absolute;box-shadow:0px 0px 2px #ccc}.d2b-tooltip-axis-area .d2b-tooltip .d2b-tooltip-title{text-align:center;background:rgba(150,165,175,.8);padding:5px 10px;font-weight:700;color:#fff}.d2b-tooltip-axis-area .d2b-tooltip .d2b-tooltip-content{padding:5px 10px}.d2b-tooltip-axis-area .d2b-tooltip .d2b-tooltip-content .d2b-tooltip-row{padding-left:5px;border-left-width:3px;border-left-style:solid;margin-bottom:5px}.d2b-tooltip-axis-area .d2b-tooltip .d2b-tooltip-content .d2b-tooltip-row:last-child{margin-bottom:0px}.d2b-breadcrumbs{color:#555;font-size:9pt;box-sizing:content-box}.d2b-breadcrumbs .d2b-breadcrumb{border:0px solid transparent;border-left-width:8px;border-bottom-width:1px;padding:6px 13px;margin-bottom:10px;text-transform:uppercase;position:relative}.d2b-breadcrumbs .d2b-breadcrumb:first-child .d2b-breadcrumb-icon:after,.d2b-breadcrumbs .d2b-breadcrumb:last-child .d2b-breadcrumb-icon:after{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);left:-15.5px;width:13px;height:13px;text-align:center;font-family:FontAwesome;color:#fff;background-color:inherit;padding:5px;border-radius:15px}.d2b-breadcrumbs .d2b-breadcrumb:first-child .d2b-breadcrumb-icon:after{content:"\\f015"}.d2b-breadcrumbs .d2b-breadcrumb:not(:first-child):last-child .d2b-breadcrumb-icon:after{content:"\\f25a"}.d2b-breadcrumbs:not(.d2b-vertical){white-space:nowrap}.d2b-breadcrumbs:not(.d2b-vertical) .d2b-breadcrumb{border-right-width:1px;border-top-width:1px;white-space:nowrap;display:inline-block}.d2b-breadcrumbs:not(.d2b-vertical) .d2b-breadcrumb:not(:last-child){margin-right:20px}.d2b-breadcrumbs:not(.d2b-vertical) .d2b-breadcrumb:not(:last-child):after{width:0;height:0;border-style:solid;border-color:transparent;border-width:6px 0 6px 6px;border-left-color:inherit;position:absolute;z-index:2;content:"";top:50%;left:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.d2b-breadcrumbs.d2b-vertical .d2b-breadcrumb{/*&:after {\n      triangle: pointing-right;\n      width: 100px;\n      height: 100px;\n      background-color: inherit;\n      position: absolute;\n      z-index: 2;\n      content: \'\';\n\n      top: 100%;\n      left: 50%;\n\n      transform: translateX(-50%);\n\n    }*/}.d2b-breadcrumbs.d2b-vertical .d2b-breadcrumb:not(:last-child):after{width:0;height:0;border-style:solid;border-color:transparent;border-width:6px 6px 0;border-top-color:inherit;position:absolute;z-index:2;content:"";top:100%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.stuff{display:none}.d2b-legend{color:#555;font-size:9pt}.d2b-legend .d2b-legend-item{border:0px solid transparent;padding:2px;padding-left:18px;position:relative;cursor:pointer}.d2b-legend .d2b-legend-item .d2b-legend-icon{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);left:7px;width:12px;height:12px}.d2b-legend .d2b-legend-item .d2b-legend-svg-icon{margin-left:-5px;margin-top:-5px;pointer-events:none}.d2b-legend .d2b-legend-item .d2b-legend-svg-icon path,.d2b-legend .d2b-legend-item .d2b-legend-svg-icon text{font-family:FontAwesome;text-anchor:middle;alignment-baseline:central;stroke-width:1px;fill-opacity:0.8}.d2b-legend:not(.d2b-vertical) .d2b-legend-item{display:inline-block}.d2b-legend:not(.d2b-vertical) .d2b-legend-item:not(:last-child){margin-right:10px}.d2b-legend:not(.d2b-vertical) .d2b-legend-icon{margin-top:1.5px}.d2b-chart-frame{height:100%;width:100%;position:relative}.d2b-chart-frame .d2b-breadcrumbs-frame,.d2b-chart-frame .d2b-chart,.d2b-chart-frame .d2b-legend-frame{position:absolute;overflow:auto}.d2b-chart-frame .d2b-breadcrumbs-frame .d2b-breadcrumbs,.d2b-chart-frame .d2b-legend-frame .d2b-breadcrumbs{padding-left:10px;padding-right:2px}.d2b-chart-frame .d2b-breadcrumbs-frame:not(.d2b-vertical),.d2b-chart-frame .d2b-legend-frame:not(.d2b-vertical){overflow-y:hidden}.d2b-chart-frame .d2b-breadcrumbs-frame:not(.d2b-vertical) .d2b-breadcrumbs,.d2b-chart-frame .d2b-breadcrumbs-frame:not(.d2b-vertical) .d2b-legend,.d2b-chart-frame .d2b-breadcrumbs-frame:not(.d2b-vertical) .d2b-legend-item,.d2b-chart-frame .d2b-legend-frame:not(.d2b-vertical) .d2b-breadcrumbs,.d2b-chart-frame .d2b-legend-frame:not(.d2b-vertical) .d2b-legend,.d2b-chart-frame .d2b-legend-frame:not(.d2b-vertical) .d2b-legend-item{white-space:nowrap;overflow-y:hidden}.d2b-chart-frame .d2b-breadcrumbs-frame:not(.d2b-vertical).d2b-legend-frame,.d2b-chart-frame .d2b-legend-frame:not(.d2b-vertical).d2b-legend-frame{height:20px;text-align:center}.d2b-chart-frame .d2b-breadcrumbs-frame:not(.d2b-vertical).d2b-breadcrumbs-frame,.d2b-chart-frame .d2b-legend-frame:not(.d2b-vertical).d2b-breadcrumbs-frame{height:55px}.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical .d2b-breadcrumbs-container,.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical .d2b-legend-container,.d2b-chart-frame .d2b-legend-frame.d2b-vertical .d2b-breadcrumbs-container,.d2b-chart-frame .d2b-legend-frame.d2b-vertical .d2b-legend-container{display:table;height:100%;width:100%}.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical .d2b-breadcrumbs-container .d2b-legend,.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical .d2b-legend-container .d2b-legend,.d2b-chart-frame .d2b-legend-frame.d2b-vertical .d2b-breadcrumbs-container .d2b-legend,.d2b-chart-frame .d2b-legend-frame.d2b-vertical .d2b-legend-container .d2b-legend{display:table-cell;vertical-align:middle}.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical .d2b-breadcrumbs-container .d2b-breadcrumbs,.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical .d2b-legend-container .d2b-breadcrumbs,.d2b-chart-frame .d2b-legend-frame.d2b-vertical .d2b-breadcrumbs-container .d2b-breadcrumbs,.d2b-chart-frame .d2b-legend-frame.d2b-vertical .d2b-legend-container .d2b-breadcrumbs{display:table-cell;vertical-align:top}.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical.d2b-breadcrumbs-frame,.d2b-chart-frame .d2b-legend-frame.d2b-vertical.d2b-breadcrumbs-frame{width:180px}.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical.d2b-legend-frame,.d2b-chart-frame .d2b-legend-frame.d2b-vertical.d2b-legend-frame{width:110px}',void 0);var d2bid=function(){return Math.random().toString(36).substr(2,9)},color=d3.scaleOrdinal(d3.schemeCategory10),number=function(t){return null===t?NaN:+t};mean.tendancy="mean",median.tendancy="median",mode.tendancy="mode",range.tendancy="range",midpoint.tendancy="midpoint";var pi=Math.PI,sqrt8=Math.sqrt(8),sqrt2=Math.sqrt(2),mars={draw:function(t,e){var r=Math.sqrt(e/(pi+5/4)),n=.3125*r,a=2*Math.asin(.25),o=(pi/2-a)/2,i=r/sqrt8-r*Math.cos(o),l=r*Math.sin(o);t.arc(i,l,r,-o,2*pi-a-o),t.lineTo(r*(5/4-1/sqrt2),-r*(1/sqrt8+5/4-1/sqrt2)),t.lineTo(r*(5/4-1/sqrt2)-n,-r*(1/sqrt8+5/4-1/sqrt2)),t.lineTo(r*(5/4-1/sqrt2)-n,-r*(1/sqrt8+7/4-1/sqrt2)),t.lineTo(r*(7/4-1/sqrt2+1/sqrt8),-r*(1/sqrt8+7/4-1/sqrt2)),t.lineTo(r*(7/4-1/sqrt2+1/sqrt8),-r*(5/4-1/sqrt2)+n),t.lineTo(r*(5/4-1/sqrt2+1/sqrt8),-r*(5/4-1/sqrt2)+n),t.lineTo(r*(5/4-1/sqrt2+1/sqrt8),-r*(5/4-1/sqrt2)),t.closePath()}},venus={draw:function(t,e){var r=Math.sqrt(e/(pi+5/4)),n=2*Math.asin(.25),a=r/4-r*Math.cos(n/2);t.arc(0,a,r,3*-pi/2+n/2,pi/2-n/2),t.lineTo(r/4,3*r/4),t.lineTo(3*r/4,3*r/4),t.lineTo(3*r/4,5*r/4),t.lineTo(r/4,5*r/4),t.lineTo(r/4,7*r/4),t.lineTo(-r/4,7*r/4),t.lineTo(-r/4,5*r/4),t.lineTo(3*-r/4,5*r/4),t.lineTo(3*-r/4,3*r/4),t.lineTo(-r/4,3*r/4),t.closePath()}},genMixin={props:{data:{default:function(){}},config:{default:function(){return function(){}}}},computed:{properties:function(){return{generator:this.generator,data:this.data,config:this.config}}},mounted:function(){this.updateDefer(),window.addEventListener("resize",this.updateDefer),this.watcher()},methods:{watcher:function(){var t=function(){e(),this.update(),this.watcher()},e=this.$watch("properties",t,{deep:!0})},update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.data;this.config(this.generator);var r=d3.select(this.$el),n=t.skipTransition?r:r.transition().duration(500);r.datum(e),n.call(this.generator)},updateNow:function(){var t=this;setTimeout(function(){t.update({skipTransition:!0})},0)},updateDefer:function(){setTimeout(this.updateNow,0)}}},chartAxis$1={mixins:[genMixin],template:'<div class = "d2b-vue-container d2b-vue-axis-chart"></div>',props:{generator:{default:function(){return chartAxis()}}}},chartPie$1={mixins:[genMixin],template:'<div class = "d2b-vue-container d2b-vue-pie-chart"></div>',props:{generator:{default:function(){return chartPie()}}}},chartSunburst$1={mixins:[genMixin],template:'<div class = "d2b-vue-container d2b-vue-sunburst-chart"></div>',props:{generator:{default:function(){return chartSunburst()}}}};exports.textWrap=textWrap,exports.textWrapPX=textWrapPX,exports.tweenArc=tweenArc,exports.tweenNumber=tweenNumber,exports.tweenCentroid=tweenCentroid,exports.tooltip=tooltip,exports.tooltipAxis=tooltipAxis,exports.stack=stack,exports.breadcrumbs=breadcrumbs,exports.legend=legend,exports.chartFrame=chartFrame,exports.defaultColor=color,exports.id=d2bid,exports.color=color,exports.omit=omit,exports.mean=mean,exports.median=median,exports.mode=mode,exports.range=range,exports.midpoint=midpoint,exports.toDegrees=toDegrees,exports.toRadians=toRadians,exports.modelBase=base,exports.symbolMars=mars,exports.symbolVenus=venus,exports.point=point,exports.svgLegend=legend$1,exports.svgPie=svgPie,exports.svgLine=line,exports.svgArea=area,exports.svgScatter=scatter,exports.svgBar=bar,exports.svgBubblePack=bubblePack,exports.svgSunburst=svgSunburst,exports.plane=plane,exports.chartPie=chartPie,exports.chartAxis=chartAxis,exports.chartSunburst=chartSunburst,exports.vueGenMixin=genMixin,exports.vueChartAxis=chartAxis$1,exports.vueChartPie=chartPie$1,exports.vueChartSunburst=chartSunburst$1;